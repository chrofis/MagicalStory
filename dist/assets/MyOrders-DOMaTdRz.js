import{c as o,u as v,a as k,b as w,j as e,e as u,C as y,E as C}from"./index-D51ERp99.js";import{u as A,b as c}from"./vendor-react-CHhk3aw2.js";import{N as L,P as f}from"./Textarea-Ch7_ZXzp.js";import{b as S}from"./api-BfnbCARd.js";import{C as p}from"./clock-jx58_84t.js";import"./vendor-firebase-DTVMaYMy.js";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=o("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=o("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=o("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]),l=w("MyOrders");function B({status:t,language:s}){const i=(()=>{switch(t.toLowerCase()){case"delivered":return{icon:e.jsx(y,{size:14}),text:s==="de"?"Geliefert":s==="fr"?"Livré":"Delivered",className:"bg-green-100 text-green-800"};case"shipped":case"in_transit":return{icon:e.jsx(z,{size:14}),text:s==="de"?"Unterwegs":s==="fr"?"En transit":"Shipped",className:"bg-blue-100 text-blue-800"};case"cancelled":case"canceled":return{icon:e.jsx(p,{size:14}),text:s==="de"?"Storniert":s==="fr"?"Annulé":"Cancelled",className:"bg-red-100 text-red-800"};default:return{icon:e.jsx(p,{size:14}),text:s==="de"?"In Bearbeitung":s==="fr"?"En cours":"Processing",className:"bg-amber-100 text-amber-800"}}})();return e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${i.className}`,children:[i.icon,i.text]})}function E({order:t,language:s,formatDate:n,formatAmount:i}){return e.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden hover:shadow-lg transition-shadow border-l-4 border-amber-400",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 bg-amber-100 rounded-full flex items-center justify-center",children:e.jsx(M,{className:"w-5 h-5 text-amber-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:s==="de"?"Guthaben":s==="fr"?"Crédits":"Credits"}),e.jsxs("h3",{className:"font-bold text-lg text-gray-800",children:["+",t.creditsAmount," ",s==="de"?"Credits":s==="fr"?"crédits":"credits"]})]})]}),e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(y,{size:14}),s==="de"?"Abgeschlossen":s==="fr"?"Terminé":"Completed"]})]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:s==="de"?"Datum:":"Date:"})," ",n(t.createdAt)]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:s==="de"?"Betrag:":s==="fr"?"Montant:":"Amount:"})," ",i(t.amount,t.currency)]})]})]})})}function O({order:t,language:s,onViewStory:n,formatDate:i,formatAmount:d}){return e.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden hover:shadow-lg transition-shadow",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-gray-500",children:[s==="de"?"Bestellung":s==="fr"?"Commande":"Order"," #",t.id]}),e.jsx("h3",{className:"font-bold text-lg text-gray-800",children:t.storyTitle})]}),e.jsx(B,{status:t.orderStatus,language:s})]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600 mb-4",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:s==="de"?"Datum:":"Date:"})," ",i(t.createdAt)]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:s==="de"?"Betrag:":s==="fr"?"Montant:":"Amount:"})," ",d(t.amount,t.currency)]}),t.shippingAddress&&e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:s==="de"?"Lieferadresse:":s==="fr"?"Adresse:":"Ship to:"})," ",t.shippingAddress.city,", ",t.shippingAddress.country]})]}),t.trackingNumber&&e.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 mb-4",children:[e.jsx("p",{className:"text-sm font-medium text-blue-800 mb-1",children:s==="de"?"Sendungsverfolgung":s==="fr"?"Suivi":"Tracking"}),t.trackingUrl?e.jsxs("a",{href:t.trackingUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-sm flex items-center gap-1",children:[t.trackingNumber,e.jsx(D,{size:12})]}):e.jsx("p",{className:"text-sm text-blue-700",children:t.trackingNumber})]}),t.storyId&&e.jsx("div",{className:"flex gap-2",children:e.jsxs("button",{onClick:n,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 text-sm font-medium",children:[e.jsx(C,{size:16}),s==="de"?"Geschichte ansehen":s==="fr"?"Voir l'histoire":"View Story"]})})]})})}function F(){const t=A(),{language:s}=v(),{isAuthenticated:n,isLoading:i}=k(),[d,j]=c.useState([]),[b,m]=c.useState(!0);c.useEffect(()=>{if(!i){if(!n){t("/");return}N()}},[n,i,t]);const N=async()=>{var r;l.debug("Loading orders...");try{m(!0);const a=await S.get("/api/user/orders");l.info("Loaded orders:",((r=a.orders)==null?void 0:r.length)||0),j(a.orders||[])}catch(a){l.error("Failed to load orders:",a)}finally{m(!1)}},x=c.useCallback(r=>{if(!r)return"-";try{return new Date(r).toLocaleDateString(s==="de"?"de-DE":s==="fr"?"fr-FR":"en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"-"}},[s]),h=c.useCallback((r,a)=>{const g=r/100;return new Intl.NumberFormat(s==="de"?"de-CH":s==="fr"?"fr-CH":"en-US",{style:"currency",currency:a.toUpperCase()}).format(g)},[s]);return i||!n?e.jsx(u,{fullScreen:!0}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(L,{currentStep:0}),e.jsxs("div",{className:"px-4 md:px-8 py-8 max-w-6xl mx-auto",children:[e.jsx("div",{className:"flex items-center justify-between mb-8",children:e.jsxs("h1",{className:"text-2xl md:text-3xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(f,{size:28}),s==="de"?"Meine Bestellungen":s==="fr"?"Mes commandes":"My Orders"]})}),b?e.jsx(u,{message:s==="de"?"Laden...":s==="fr"?"Chargement...":"Loading..."}):d.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(f,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:s==="de"?"Noch keine Bestellungen":s==="fr"?"Aucune commande":"No orders yet"}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:s==="de"?"Wenn du ein Buch bestellst, wird es hier angezeigt.":s==="fr"?"Quand vous commandez un livre, il apparaîtra ici.":"When you order a book, it will appear here."})]}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:d.map(r=>r.type==="credits"?e.jsx(E,{order:r,language:s,formatDate:x,formatAmount:h},r.id):e.jsx(O,{order:r,language:s,onViewStory:()=>t(`/create?storyId=${r.storyId}`),formatDate:x,formatAmount:h},r.id))})]})]})}export{F as default};
