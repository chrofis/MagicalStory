import{c as h,u,a as x,j as e,C as f,L as s}from"./index-CK-BZG2c.js";import{u as w,b as c}from"./vendor-react-CHhk3aw2.js";import{B as a}from"./api-BLTS7n16.js";import{N as y}from"./Textarea-DC9wljZv.js";import{S as p}from"./sparkles-BFEYY6M-.js";import"./vendor-firebase-DTVMaYMy.js";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=h("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),l={en:{title:"Email Verified!",description:"Your email has been verified successfully. You can now create your magical story.",checkingOtherWindow:"Checking if your story is starting in the other window...",generatingInOtherWindow:"Your story is being generated in your other browser window!",otherWindowHint:"You can close this tab and return to your original window.",autoGenerating:"Starting your story generation...",createStory:"Create Your Story",goHome:"Go to Homepage"},de:{title:"E-Mail bestätigt!",description:"Ihre E-Mail wurde erfolgreich bestätigt. Sie können jetzt Ihre magische Geschichte erstellen.",checkingOtherWindow:"Prüfe, ob Ihre Geschichte im anderen Fenster startet...",generatingInOtherWindow:"Ihre Geschichte wird im anderen Browserfenster generiert!",otherWindowHint:"Sie können diesen Tab schließen und zu Ihrem ursprünglichen Fenster zurückkehren.",autoGenerating:"Starte Ihre Geschichte...",createStory:"Geschichte erstellen",goHome:"Zur Startseite"},fr:{title:"E-mail verifie!",description:"Votre e-mail a ete verifie avec succes. Vous pouvez maintenant creer votre histoire magique.",checkingOtherWindow:"Verification si votre histoire demarre dans l'autre fenetre...",generatingInOtherWindow:"Votre histoire est en cours de generation dans votre autre fenetre!",otherWindowHint:"Vous pouvez fermer cet onglet et retourner a votre fenetre d'origine.",autoGenerating:"Demarrage de votre histoire...",createStory:"Creer votre histoire",goHome:"Aller a l'accueil"}};function E(){const n=w(),{language:d}=u(),{refreshUser:o}=x(),t=l[d]||l.en,[r,i]=c.useState("idle");return c.useEffect(()=>{(async()=>{if(localStorage.getItem("verificationGenerationStarted")){i("other_window"),localStorage.removeItem("pendingStoryGeneration");return}const m=localStorage.getItem("pendingStoryGeneration")==="true";if(await o(),localStorage.getItem("verificationGenerationStarted")){i("other_window"),localStorage.removeItem("pendingStoryGeneration");return}if(!m){i("idle");return}i("checking"),await new Promise(g=>setTimeout(g,5e3)),localStorage.getItem("verificationGenerationStarted")?(i("other_window"),localStorage.removeItem("pendingStoryGeneration")):(i("redirecting"),localStorage.removeItem("pendingStoryGeneration"),setTimeout(()=>{n("/create?autoGenerate=true")},1e3))})()},[n,o]),e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[e.jsx(y,{currentStep:0}),e.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg max-w-md w-full p-8 text-center",children:[e.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 ${r==="other_window"?"bg-indigo-100":"bg-green-100"}`,children:r==="other_window"?e.jsx(v,{className:"w-10 h-10 text-indigo-600"}):e.jsx(f,{className:"w-10 h-10 text-green-600"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-3",children:t.title}),r==="checking"&&e.jsx("div",{className:"mb-8",children:e.jsxs("p",{className:"text-gray-600 flex items-center justify-center gap-2",children:[e.jsx(s,{className:"w-5 h-5 animate-spin"}),t.checkingOtherWindow]})}),r==="other_window"&&e.jsxs("div",{className:"mb-8",children:[e.jsx("p",{className:"text-indigo-600 font-medium mb-2",children:t.generatingInOtherWindow}),e.jsx("p",{className:"text-gray-500 text-sm",children:t.otherWindowHint})]}),r==="redirecting"&&e.jsx("div",{className:"mb-8",children:e.jsxs("p",{className:"text-indigo-600 font-medium flex items-center justify-center gap-2",children:[e.jsx(s,{className:"w-5 h-5 animate-spin"}),t.autoGenerating]})}),r==="idle"&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-500 mb-8",children:t.description}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(a,{onClick:()=>n("/create"),variant:"primary",className:"w-full",children:[e.jsx(p,{size:18,className:"mr-2"}),t.createStory]}),e.jsx(a,{onClick:()=>n("/"),variant:"secondary",className:"w-full",children:t.goHome})]})]}),r==="other_window"&&e.jsx("div",{className:"space-y-3 mt-6",children:e.jsx(a,{onClick:()=>n("/"),variant:"secondary",className:"w-full",children:t.goHome})})]})})]})}export{E as default};
