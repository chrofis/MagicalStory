import{c as m,u as M,b as L,j as e}from"./index-C3xuJgzB.js";import{u as A,b as x}from"./vendor-react-BhxjzHy9.js";import{B as P,C as B,U as E}from"./Input-uvs6JtPz.js";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=m("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=m("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=m("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=m("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=m("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);function D({currentStep:d=0,onStepClick:n,canAccessStep:o,developerMode:g=!1,onDeveloperModeChange:c}){const r=A(),{t:f,language:t,setLanguage:v}=M(),{isAuthenticated:h,user:a,logout:k,isImpersonating:j}=L(),[u,i]=x.useState(!1),[N,b]=x.useState(!1),p=x.useRef(null);x.useEffect(()=>{const s=l=>{p.current&&!p.current.contains(l.target)&&i(!1)};return u&&document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[u]);const C=()=>{k(),i(!1),r("/")},y=(a==null?void 0:a.credits)??0,z=(a==null?void 0:a.credits)===-1;return e.jsxs("nav",{className:"bg-black text-white px-3 py-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsxs("button",{onClick:()=>r("/"),className:"text-sm md:text-base font-bold whitespace-nowrap hover:opacity-80",children:["âœ¨ ",f.title]})}),d>0&&n&&o&&e.jsx("div",{className:"flex items-center gap-0.5 md:gap-1 flex-1 justify-center",children:[1,2,3,4,5].map(s=>{const l=o(s);return e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>l&&n(s),disabled:!l,className:`w-5 h-5 md:w-6 md:h-6 rounded-full flex items-center justify-center text-[10px] md:text-xs font-bold transition-all ${l?d===s?"bg-indigo-600 text-white ring-1 ring-indigo-200":"bg-indigo-500 text-white hover:bg-indigo-600 cursor-pointer hover:scale-110":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:s}),s<5&&e.jsx("div",{className:`w-3 md:w-6 h-0.5 ${l?"bg-indigo-500":"bg-gray-600"}`})]},s)})}),e.jsxs("div",{className:"flex items-center gap-3",children:[h&&((a==null?void 0:a.role)==="admin"||j)&&c&&e.jsxs("button",{onClick:()=>c(!g),className:`px-2 py-1 rounded text-xs font-semibold flex items-center gap-1 transition-colors ${g?"bg-yellow-500 text-black":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,title:t==="de"?"Entwicklermodus":t==="fr"?"Mode dÃ©veloppeur":"Developer Mode",children:[e.jsx(S,{size:14}),e.jsx("span",{className:"hidden md:inline",children:"DEV"})]}),e.jsxs("div",{className:"relative",ref:p,children:[e.jsxs("button",{onClick:()=>i(!u),className:"bg-gray-800 text-white px-3 py-1.5 rounded text-xs font-semibold hover:bg-gray-700 flex items-center gap-2",children:[e.jsx(V,{size:16}),e.jsx("span",{className:"hidden md:inline",children:"Menu"})]}),u&&e.jsxs("div",{className:"absolute right-0 mt-2 bg-gray-800 rounded-lg shadow-lg overflow-hidden z-50 min-w-[200px]",children:[h&&a&&e.jsxs("div",{className:"border-b border-gray-700 px-4 py-3 bg-gray-900",children:[e.jsxs("div",{className:"text-white font-semibold text-sm mb-1",children:[a.username," ",a.role==="admin"&&"ðŸ‘‘"]}),!z&&e.jsxs("div",{className:`text-xs px-2 py-1 rounded inline-block ${y===0?"bg-red-600 text-white":y<50?"bg-yellow-600 text-white":"bg-green-600 text-white"}`,children:[y," ",t==="de"?"Credits":t==="fr"?"crÃ©dits":"credits"]})]}),e.jsxs("div",{className:"border-b border-gray-700 px-4 py-2",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-2",children:t==="de"?"Sprache":t==="fr"?"Langue":"Language"}),e.jsx("div",{className:"flex gap-2",children:["en","de","fr"].map(s=>e.jsx("button",{onClick:()=>{v(s),i(!1)},className:`flex-1 px-3 py-2 rounded text-xs font-semibold ${t===s?"bg-indigo-600 text-white":"bg-gray-700 text-white hover:bg-gray-600"}`,children:s.toUpperCase()},s))})]}),h&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>{r("/stories"),i(!1)},className:"w-full text-left px-4 py-3 hover:bg-gray-700 text-white flex items-center gap-2 border-b border-gray-700",children:[e.jsx(P,{size:16}),e.jsx("span",{children:t==="de"?"Meine Geschichten":t==="fr"?"Mes histoires":"My Stories"})]}),e.jsxs("button",{onClick:()=>{r("/orders"),i(!1)},className:"w-full text-left px-4 py-3 hover:bg-gray-700 text-white flex items-center gap-2 border-b border-gray-700",children:[e.jsx($,{size:16}),e.jsx("span",{children:t==="de"?"Meine Bestellungen":t==="fr"?"Mes commandes":"My Orders"})]}),e.jsxs("button",{onClick:()=>{b(!0),i(!1)},className:"w-full text-left px-4 py-3 hover:bg-gray-700 text-white flex items-center gap-2 border-b border-gray-700",children:[e.jsx(B,{size:16}),e.jsx("span",{children:t==="de"?"Credits kaufen":t==="fr"?"Acheter des crÃ©dits":"Buy Credits"})]}),((a==null?void 0:a.role)==="admin"||j)&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>{r("/admin"),i(!1)},className:"w-full text-left px-4 py-3 hover:bg-gray-700 text-white flex items-center gap-2 border-b border-gray-700",children:[e.jsx(O,{size:16}),e.jsx("span",{children:t==="de"?"Admin Panel":t==="fr"?"Panneau Admin":"Admin Panel"})]}),e.jsxs("button",{onClick:()=>{r("/admin?tab=users"),i(!1)},className:"w-full text-left px-4 py-3 hover:bg-gray-700 text-white flex items-center gap-2 border-b border-gray-700",children:[e.jsx(E,{size:16}),e.jsx("span",{children:t==="de"?"Benutzer verwalten":t==="fr"?"GÃ©rer les utilisateurs":"Manage Users"})]})]}),e.jsxs("button",{onClick:C,className:"w-full text-left px-4 py-3 hover:bg-gray-700 text-white flex items-center gap-2",children:[e.jsx(w,{size:16}),e.jsx("span",{children:f.logout})]})]}),!h&&e.jsxs("button",{onClick:()=>{r("/?login=true"),i(!1)},className:"w-full text-left px-4 py-3 hover:bg-gray-700 text-white flex items-center gap-2",children:[e.jsx(w,{size:16}),e.jsx("span",{children:f.login})]})]})]})]})]}),N&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>b(!1),children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md mx-4 shadow-xl",onClick:s=>s.stopPropagation(),children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:t==="de"?"Credits kaufen":t==="fr"?"Acheter des crÃ©dits":"Buy Credits"}),e.jsx("p",{className:"text-gray-600 mb-4",children:t==="de"?"Diese Funktion kommt bald. Bitte kontaktieren Sie uns fÃ¼r weitere Credits.":t==="fr"?"Cette fonctionnalitÃ© arrive bientÃ´t. Veuillez nous contacter pour obtenir plus de crÃ©dits.":"This feature is coming soon. Please contact us to get more credits."}),e.jsxs("div",{className:"bg-indigo-50 rounded-lg p-4 mb-4",children:[e.jsx("p",{className:"text-indigo-900 font-medium",children:t==="de"?"Kontakt:":"Contact:"}),e.jsx("a",{href:"mailto:info@magicalstory.ch",className:"text-indigo-600 hover:underline font-semibold",children:"info@magicalstory.ch"})]}),e.jsx("button",{onClick:()=>b(!1),className:"w-full bg-indigo-600 text-white py-2 px-4 rounded-lg hover:bg-indigo-700 font-semibold",children:t==="de"?"SchlieÃŸen":t==="fr"?"Fermer":"Close"})]})})]})}const U=x.forwardRef(({label:d,error:n,helperText:o,className:g="",...c},r)=>e.jsxs("div",{className:"w-full",children:[d&&e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[d,c.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("textarea",{ref:r,className:`
            w-full px-4 py-2 rounded-lg border resize-y
            transition-all duration-200
            focus:outline-none focus:ring-2
            ${n?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-purple-500 focus:border-purple-500"}
            disabled:bg-gray-100 disabled:cursor-not-allowed
            ${g}
          `,...c}),n&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n}),o&&!n&&e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:o})]}));U.displayName="Textarea";export{D as N,$ as P};
