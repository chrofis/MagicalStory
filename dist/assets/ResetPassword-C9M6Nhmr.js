import{c as L,u as T,j as e,C as S}from"./index-6p0J91m-.js";import{f as C,u as z,b as a}from"./vendor-react-k5uhsfqB.js";import{B as l}from"./Button-ODhEOseh.js";import{N as D}from"./Textarea-QO_XRdSQ.js";import{I as x}from"./Input-Bfhqv2Jz.js";import{A as R}from"./Alert-D9nE4Hxk.js";import{C as I}from"./circle-x-BxISGTnT.js";import"./vendor-firebase-Ksn6Afo7.js";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=L("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]),A="",h={en:{title:"Reset Your Password",description:"Enter your new password below.",newPassword:"New password",confirmPassword:"Confirm password",resetPassword:"Reset Password",passwordsMatch:"Passwords must match",passwordTooShort:"Password must be at least 6 characters",success:"Password reset successfully!",successDesc:"You can now log in with your new password.",goToLogin:"Go to Login",invalidToken:"Invalid or Expired Link",invalidTokenDesc:"This password reset link is invalid or has expired. Please request a new one.",requestNewLink:"Request New Link"},de:{title:"Passwort zuruecksetzen",description:"Geben Sie unten Ihr neues Passwort ein.",newPassword:"Neues Passwort",confirmPassword:"Passwort bestaetigen",resetPassword:"Passwort zuruecksetzen",passwordsMatch:"Passwoerter muessen uebereinstimmen",passwordTooShort:"Passwort muss mindestens 6 Zeichen lang sein",success:"Passwort erfolgreich zurueckgesetzt!",successDesc:"Sie koennen sich jetzt mit Ihrem neuen Passwort anmelden.",goToLogin:"Zur Anmeldung",invalidToken:"Ungueltiger oder abgelaufener Link",invalidTokenDesc:"Dieser Passwort-Reset-Link ist ungueltig oder abgelaufen. Bitte fordern Sie einen neuen an.",requestNewLink:"Neuen Link anfordern"},fr:{title:"Reinitialiser le mot de passe",description:"Entrez votre nouveau mot de passe ci-dessous.",newPassword:"Nouveau mot de passe",confirmPassword:"Confirmer le mot de passe",resetPassword:"Reinitialiser le mot de passe",passwordsMatch:"Les mots de passe doivent correspondre",passwordTooShort:"Le mot de passe doit contenir au moins 6 caracteres",success:"Mot de passe reinitialise avec succes!",successDesc:"Vous pouvez maintenant vous connecter avec votre nouveau mot de passe.",goToLogin:"Aller a la connexion",invalidToken:"Lien invalide ou expire",invalidTokenDesc:"Ce lien de reinitialisation de mot de passe est invalide ou a expire. Veuillez en demander un nouveau.",requestNewLink:"Demander un nouveau lien"}};function U(){const{token:f}=C(),c=z(),{language:g}=T(),s=h[g]||h.en,[n,v]=a.useState(""),[d,j]=a.useState(""),[i,u]=a.useState(!1),[m,r]=a.useState(""),[N,P]=a.useState(!1),[b,y]=a.useState(!1),k=async t=>{var w;if(t.preventDefault(),r(""),n.length<6){r(s.passwordTooShort);return}if(n!==d){r(s.passwordsMatch);return}u(!0);try{const o=await fetch(`${A}/api/auth/reset-password/confirm`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:f,password:n})}),p=await o.json();if(!o.ok){o.status===400&&((w=p.error)!=null&&w.includes("expired"))?y(!0):r(p.error||"Failed to reset password");return}P(!0)}catch{r("Failed to reset password. Please try again.")}finally{u(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[e.jsx(D,{currentStep:0}),e.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:e.jsx("div",{className:"bg-white rounded-xl shadow-lg max-w-md w-full p-8",children:N?e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(S,{className:"w-8 h-8 text-green-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:s.success}),e.jsx("p",{className:"text-gray-500 mb-6",children:s.successDesc}),e.jsx(l,{onClick:()=>c("/?login=true"),variant:"primary",className:"w-full",children:s.goToLogin})]}):b?e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(I,{className:"w-8 h-8 text-red-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:s.invalidToken}),e.jsx("p",{className:"text-gray-500 mb-6",children:s.invalidTokenDesc}),e.jsx(l,{onClick:()=>c("/?login=true"),variant:"primary",className:"w-full",children:s.requestNewLink})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(q,{className:"w-8 h-8 text-indigo-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:s.title}),e.jsx("p",{className:"text-gray-500",children:s.description})]}),m&&e.jsx(R,{variant:"error",className:"mb-4",children:m}),e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[e.jsx(x,{type:"password",label:s.newPassword,value:n,onChange:t=>v(t.target.value),placeholder:"••••••••",required:!0,disabled:i}),e.jsx(x,{type:"password",label:s.confirmPassword,value:d,onChange:t=>j(t.target.value),placeholder:"••••••••",required:!0,disabled:i}),e.jsx(l,{type:"submit",variant:"primary",loading:i,className:"w-full",children:s.resetPassword})]})]})})})]})}export{U as default};
