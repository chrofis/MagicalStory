import{u as k,a as z,j as e}from"./index-Bo_0hsce.js";import{u as C,b as j}from"./vendor-react-BhxjzHy9.js";import{c as h,B as M,U as L}from"./Input-2-L5lr0F.js";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=h("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f=h("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=h("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=h("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);function B({currentStep:o=0,onStepClick:n,canAccessStep:d,developerMode:g=!1,onDeveloperModeChange:x}){const l=C(),{t:u,language:s,setLanguage:w}=k(),{isAuthenticated:c,user:t,logout:v}=z(),[b,r]=j.useState(!1),N=()=>{v(),r(!1),l("/")},i=t?t.storyQuota===-1?null:t.storyQuota-t.storiesGenerated:null,y=t==null?void 0:t.storyQuota,p=(t==null?void 0:t.storyQuota)===-1;return e.jsx("nav",{className:"bg-black text-white px-3 py-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsxs("button",{onClick:()=>l("/"),className:"text-sm md:text-base font-bold whitespace-nowrap hover:opacity-80",children:["âœ¨ ",u.title]})}),o>0&&n&&d&&e.jsx("div",{className:"flex items-center gap-0.5 md:gap-1 flex-1 justify-center",children:[1,2,3,4,5].map(a=>{const m=d(a);return e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>m&&n(a),disabled:!m,className:`w-5 h-5 md:w-6 md:h-6 rounded-full flex items-center justify-center text-[10px] md:text-xs font-bold transition-all ${m?o===a?"bg-indigo-600 text-white ring-1 ring-indigo-200":"bg-indigo-500 text-white hover:bg-indigo-600 cursor-pointer hover:scale-110":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:a}),a<5&&e.jsx("div",{className:`w-3 md:w-6 h-0.5 ${m?"bg-indigo-500":"bg-gray-600"}`})]},a)})}),o===0&&c&&t&&!p&&i!==null&&e.jsxs("div",{className:`px-3 py-1 rounded text-xs font-semibold ${i===0?"bg-red-600 text-white":i===1?"bg-yellow-600 text-white":"bg-green-600 text-white"}`,children:[i," / ",y," stories"]}),c&&(t==null?void 0:t.role)==="admin"&&x&&e.jsxs("button",{onClick:()=>x(!g),className:`px-2 py-1 rounded text-xs font-semibold flex items-center gap-1 transition-colors ${g?"bg-yellow-500 text-black":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,title:s==="de"?"Entwicklermodus":s==="fr"?"Mode dÃ©veloppeur":"Developer Mode",children:[e.jsx($,{size:14}),e.jsx("span",{className:"hidden md:inline",children:"DEV"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>r(!b),className:"bg-gray-800 text-white px-3 py-1.5 rounded text-xs font-semibold hover:bg-gray-700 flex items-center gap-2",children:[e.jsx(A,{size:16}),e.jsx("span",{className:"hidden md:inline",children:"Menu"})]}),b&&e.jsxs("div",{className:"absolute right-0 mt-2 bg-gray-800 rounded-lg shadow-lg overflow-hidden z-50 min-w-[200px]",children:[c&&t&&e.jsxs("div",{className:"border-b border-gray-700 px-4 py-3 bg-gray-900",children:[e.jsxs("div",{className:"text-white font-semibold text-sm mb-1",children:[t.username," ",t.role==="admin"&&"ðŸ‘‘"]}),!p&&i!==null&&e.jsxs("div",{className:`text-xs px-2 py-1 rounded inline-block ${i===0?"bg-red-600 text-white":i===1?"bg-yellow-600 text-white":"bg-green-600 text-white"}`,children:[i," / ",y," ",s==="de"?"Geschichten":s==="fr"?"histoires":"stories"]})]}),e.jsxs("div",{className:"border-b border-gray-700 px-4 py-2",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-2",children:s==="de"?"Sprache":s==="fr"?"Langue":"Language"}),e.jsx("div",{className:"flex gap-2",children:["en","de","fr"].map(a=>e.jsx("button",{onClick:()=>{w(a),r(!1)},className:`flex-1 px-3 py-2 rounded text-xs font-semibold ${s===a?"bg-indigo-600 text-white":"bg-gray-700 text-white hover:bg-gray-600"}`,children:a.toUpperCase()},a))})]}),c&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>{l("/stories"),r(!1)},className:"w-full text-left px-4 py-3 hover:bg-gray-700 text-white flex items-center gap-2 border-b border-gray-700",children:[e.jsx(M,{size:16}),e.jsx("span",{children:s==="de"?"Meine Geschichten":s==="fr"?"Mes histoires":"My Stories"})]}),(t==null?void 0:t.role)==="admin"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>{l("/admin"),r(!1)},className:"w-full text-left px-4 py-3 hover:bg-gray-700 text-white flex items-center gap-2 border-b border-gray-700",children:[e.jsx(U,{size:16}),e.jsx("span",{children:s==="de"?"Admin Panel":s==="fr"?"Panneau Admin":"Admin Panel"})]}),e.jsxs("button",{onClick:()=>{l("/admin?tab=users"),r(!1)},className:"w-full text-left px-4 py-3 hover:bg-gray-700 text-white flex items-center gap-2 border-b border-gray-700",children:[e.jsx(L,{size:16}),e.jsx("span",{children:s==="de"?"Benutzer verwalten":s==="fr"?"GÃ©rer les utilisateurs":"Manage Users"})]})]}),e.jsxs("button",{onClick:N,className:"w-full text-left px-4 py-3 hover:bg-gray-700 text-white flex items-center gap-2",children:[e.jsx(f,{size:16}),e.jsx("span",{children:u.logout})]})]}),!c&&e.jsxs("button",{onClick:()=>{l("/?login=true"),r(!1)},className:"w-full text-left px-4 py-3 hover:bg-gray-700 text-white flex items-center gap-2",children:[e.jsx(f,{size:16}),e.jsx("span",{children:u.login})]})]})]})]})})}const E=j.forwardRef(({label:o,error:n,helperText:d,className:g="",...x},l)=>e.jsxs("div",{className:"w-full",children:[o&&e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[o,x.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("textarea",{ref:l,className:`
            w-full px-4 py-2 rounded-lg border resize-y
            transition-all duration-200
            focus:outline-none focus:ring-2
            ${n?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-purple-500 focus:border-purple-500"}
            disabled:bg-gray-100 disabled:cursor-not-allowed
            ${g}
          `,...x}),n&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n}),d&&!n&&e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:d})]}));E.displayName="Textarea";export{B as N};
