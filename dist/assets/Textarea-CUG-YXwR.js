import{u as z,a as C,j as e}from"./index-8sVKUAsp.js";import{u as M,b as h}from"./vendor-react-BhxjzHy9.js";import{c as b,B as L,U as E}from"./Input-CMh1mZXv.js";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=b("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p=b("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=b("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=b("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);function V({currentStep:o=0,onStepClick:r,canAccessStep:d,developerMode:x=!1,onDeveloperModeChange:c}){const n=M(),{t:f,language:a,setLanguage:j}=z(),{isAuthenticated:g,user:t,logout:w}=C(),[m,l]=h.useState(!1),y=h.useRef(null);h.useEffect(()=>{const s=i=>{y.current&&!y.current.contains(i.target)&&l(!1)};return m&&document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[m]);const v=()=>{w(),l(!1),n("/")},u=t?t.storyQuota===-1?null:t.storyQuota-t.storiesGenerated:null,N=t==null?void 0:t.storyQuota,k=(t==null?void 0:t.storyQuota)===-1;return e.jsx("nav",{className:"bg-black text-white px-3 py-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsxs("button",{onClick:()=>n("/"),className:"text-sm md:text-base font-bold whitespace-nowrap hover:opacity-80",children:["âœ¨ ",f.title]})}),o>0&&r&&d&&e.jsx("div",{className:"flex items-center gap-0.5 md:gap-1 flex-1 justify-center",children:[1,2,3,4,5].map(s=>{const i=d(s);return e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>i&&r(s),disabled:!i,className:`w-5 h-5 md:w-6 md:h-6 rounded-full flex items-center justify-center text-[10px] md:text-xs font-bold transition-all ${i?o===s?"bg-indigo-600 text-white ring-1 ring-indigo-200":"bg-indigo-500 text-white hover:bg-indigo-600 cursor-pointer hover:scale-110":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:s}),s<5&&e.jsx("div",{className:`w-3 md:w-6 h-0.5 ${i?"bg-indigo-500":"bg-gray-600"}`})]},s)})}),g&&(t==null?void 0:t.role)==="admin"&&c&&e.jsxs("button",{onClick:()=>c(!x),className:`px-2 py-1 rounded text-xs font-semibold flex items-center gap-1 transition-colors ${x?"bg-yellow-500 text-black":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,title:a==="de"?"Entwicklermodus":a==="fr"?"Mode dÃ©veloppeur":"Developer Mode",children:[e.jsx($,{size:14}),e.jsx("span",{className:"hidden md:inline",children:"DEV"})]}),e.jsxs("div",{className:"relative",ref:y,children:[e.jsxs("button",{onClick:()=>l(!m),className:"bg-gray-800 text-white px-3 py-1.5 rounded text-xs font-semibold hover:bg-gray-700 flex items-center gap-2",children:[e.jsx(A,{size:16}),e.jsx("span",{className:"hidden md:inline",children:"Menu"})]}),m&&e.jsxs("div",{className:"absolute right-0 mt-2 bg-gray-800 rounded-lg shadow-lg overflow-hidden z-50 min-w-[200px]",children:[g&&t&&e.jsxs("div",{className:"border-b border-gray-700 px-4 py-3 bg-gray-900",children:[e.jsxs("div",{className:"text-white font-semibold text-sm mb-1",children:[t.username," ",t.role==="admin"&&"ðŸ‘‘"]}),!k&&u!==null&&e.jsxs("div",{className:`text-xs px-2 py-1 rounded inline-block ${u===0?"bg-red-600 text-white":u===1?"bg-yellow-600 text-white":"bg-green-600 text-white"}`,children:[u," / ",N," ",a==="de"?"Geschichten":a==="fr"?"histoires":"stories"]})]}),e.jsxs("div",{className:"border-b border-gray-700 px-4 py-2",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-2",children:a==="de"?"Sprache":a==="fr"?"Langue":"Language"}),e.jsx("div",{className:"flex gap-2",children:["en","de","fr"].map(s=>e.jsx("button",{onClick:()=>{j(s),l(!1)},className:`flex-1 px-3 py-2 rounded text-xs font-semibold ${a===s?"bg-indigo-600 text-white":"bg-gray-700 text-white hover:bg-gray-600"}`,children:s.toUpperCase()},s))})]}),g&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>{n("/stories"),l(!1)},className:"w-full text-left px-4 py-3 hover:bg-gray-700 text-white flex items-center gap-2 border-b border-gray-700",children:[e.jsx(L,{size:16}),e.jsx("span",{children:a==="de"?"Meine Geschichten":a==="fr"?"Mes histoires":"My Stories"})]}),(t==null?void 0:t.role)==="admin"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>{n("/admin"),l(!1)},className:"w-full text-left px-4 py-3 hover:bg-gray-700 text-white flex items-center gap-2 border-b border-gray-700",children:[e.jsx(U,{size:16}),e.jsx("span",{children:a==="de"?"Admin Panel":a==="fr"?"Panneau Admin":"Admin Panel"})]}),e.jsxs("button",{onClick:()=>{n("/admin?tab=users"),l(!1)},className:"w-full text-left px-4 py-3 hover:bg-gray-700 text-white flex items-center gap-2 border-b border-gray-700",children:[e.jsx(E,{size:16}),e.jsx("span",{children:a==="de"?"Benutzer verwalten":a==="fr"?"GÃ©rer les utilisateurs":"Manage Users"})]})]}),e.jsxs("button",{onClick:v,className:"w-full text-left px-4 py-3 hover:bg-gray-700 text-white flex items-center gap-2",children:[e.jsx(p,{size:16}),e.jsx("span",{children:f.logout})]})]}),!g&&e.jsxs("button",{onClick:()=>{n("/?login=true"),l(!1)},className:"w-full text-left px-4 py-3 hover:bg-gray-700 text-white flex items-center gap-2",children:[e.jsx(p,{size:16}),e.jsx("span",{children:f.login})]})]})]})]})})}const G=h.forwardRef(({label:o,error:r,helperText:d,className:x="",...c},n)=>e.jsxs("div",{className:"w-full",children:[o&&e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[o,c.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("textarea",{ref:n,className:`
            w-full px-4 py-2 rounded-lg border resize-y
            transition-all duration-200
            focus:outline-none focus:ring-2
            ${r?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-purple-500 focus:border-purple-500"}
            disabled:bg-gray-100 disabled:cursor-not-allowed
            ${x}
          `,...c}),r&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r}),d&&!r&&e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:d})]}));G.displayName="Textarea";export{V as N};
