const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LandingPage-kF9jRgka.js","assets/vendor-react-BhxjzHy9.js","assets/Input-CP177Za2.js","assets/x-CwVT1Gkj.js","assets/Textarea-CEonuZj7.js","assets/StoryWizard-DRluZS_M.js","assets/api-CmOyxlnc.js","assets/AdminDashboard-CnMbUlpw.js"])))=>i.map(i=>d[i]);
import{r as _,a as z,b as i,R as O,c as A,B as L}from"./vendor-react-BhxjzHy9.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))y(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const h of o.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&y(h)}).observe(document,{childList:!0,subtree:!0});function t(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function y(a){if(a.ep)return;a.ep=!0;const o=t(a);fetch(a.href,o)}})();var v={exports:{}},S={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w;function N(){if(w)return S;w=1;var e=_(),r=Symbol.for("react.element"),t=Symbol.for("react.fragment"),y=Object.prototype.hasOwnProperty,a=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function h(c,p,g){var u,s={},n=null,d=null;g!==void 0&&(n=""+g),p.key!==void 0&&(n=""+p.key),p.ref!==void 0&&(d=p.ref);for(u in p)y.call(p,u)&&!o.hasOwnProperty(u)&&(s[u]=p[u]);if(c&&c.defaultProps)for(u in p=c.defaultProps,p)s[u]===void 0&&(s[u]=p[u]);return{$$typeof:r,type:c,key:n,ref:d,props:s,_owner:a.current}}return S.Fragment=t,S.jsx=h,S.jsxs=h,S}var T;function j(){return T||(T=1,v.exports=N()),v.exports}var l=j(),P={},R;function B(){if(R)return P;R=1;var e=z();return P.createRoot=e.createRoot,P.hydrateRoot=e.hydrateRoot,P}var F=B();const H="modulepreload",M=function(e){return"/"+e},b={},E=function(r,t,y){let a=Promise.resolve();if(t&&t.length>0){let h=function(g){return Promise.all(g.map(u=>Promise.resolve(u).then(s=>({status:"fulfilled",value:s}),s=>({status:"rejected",reason:s}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),p=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));a=h(t.map(g=>{if(g=M(g),g in b)return;b[g]=!0;const u=g.endsWith(".css"),s=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${s}`))return;const n=document.createElement("link");if(n.rel=u?"stylesheet":H,u||(n.as="script"),n.crossOrigin="",n.href=g,p&&n.setAttribute("nonce",p),document.head.appendChild(n),u)return new Promise((d,m)=>{n.addEventListener("load",d),n.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${g}`)))})}))}function o(h){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=h,window.dispatchEvent(c),!c.defaultPrevented)throw h}return a.then(h=>{for(const c of h||[])c.status==="rejected"&&o(c.reason);return r().catch(o)})};function K({size:e="md",fullScreen:r=!1,message:t}){const y={sm:"w-6 h-6 border-2",md:"w-10 h-10 border-3",lg:"w-16 h-16 border-4"},a=l.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[l.jsx("div",{className:`${y[e]} spinner`}),t&&l.jsx("p",{className:"text-purple-600 font-medium",children:t})]});return r?l.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 flex items-center justify-center z-50",children:a}):a}const W=i.lazy(()=>E(()=>import("./LandingPage-kF9jRgka.js"),__vite__mapDeps([0,1,2,3,4]))),q=i.lazy(()=>E(()=>import("./StoryWizard-DRluZS_M.js"),__vite__mapDeps([5,1,2,4,6]))),U=i.lazy(()=>E(()=>import("./AdminDashboard-CnMbUlpw.js"),__vite__mapDeps([7,1,6,2,3])));function V(){return l.jsx(i.Suspense,{fallback:l.jsx(K,{fullScreen:!0}),children:l.jsxs(O,{children:[l.jsx(A,{path:"/",element:l.jsx(W,{})}),l.jsx(A,{path:"/create/*",element:l.jsx(q,{})}),l.jsx(A,{path:"/admin",element:l.jsx(U,{})})]})})}const x=i.createContext(null),C="";function Y({children:e}){const[r,t]=i.useState({isAuthenticated:!1,user:null,token:null}),[y,a]=i.useState(!0);i.useEffect(()=>{const s=localStorage.getItem("token");s&&!localStorage.getItem("auth_token")&&(localStorage.setItem("auth_token",s),localStorage.removeItem("token"));const n=localStorage.getItem("auth_token"),d=localStorage.getItem("current_user");if(n&&d)try{const m=JSON.parse(d);t({isAuthenticated:!0,user:m,token:n})}catch{localStorage.removeItem("auth_token"),localStorage.removeItem("current_user")}a(!1)},[]);const o=i.useCallback(async(s,n)=>{const d=await fetch(`${C}/api/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:s,password:n})});if(!d.ok){const D=await d.json();throw new Error(D.error||"Login failed")}const m=await d.json(),f={id:m.user.id,username:m.user.username,email:m.user.email,role:m.user.role,storyQuota:m.user.story_quota,storiesGenerated:m.user.stories_generated};localStorage.setItem("auth_token",m.token),localStorage.setItem("current_user",JSON.stringify(f)),t({isAuthenticated:!0,user:f,token:m.token})},[]),h=i.useCallback(async(s,n,d)=>{const m=await fetch(`${C}/api/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:s,password:n,email:d})});if(!m.ok){const f=await m.json();throw new Error(f.error||"Registration failed")}await o(s,n)},[o]),c=i.useCallback(async()=>{throw new Error("Google login not yet implemented")},[]),p=i.useCallback(async s=>{const n=await fetch(`${C}/api/auth/reset-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s})});if(!n.ok){const d=await n.json();throw new Error(d.error||"Password reset failed")}},[]),g=i.useCallback(()=>{localStorage.removeItem("auth_token"),localStorage.removeItem("current_user"),t({isAuthenticated:!1,user:null,token:null})},[]),u=i.useCallback(s=>{t(n=>{if(!n.user)return n;const d={...n.user,storyQuota:s.storyQuota,storiesGenerated:s.storiesGenerated};return localStorage.setItem("current_user",JSON.stringify(d)),{...n,user:d}})},[]);return l.jsx(x.Provider,{value:{...r,login:o,register:h,loginWithGoogle:c,resetPassword:p,logout:g,updateQuota:u,isLoading:y},children:e})}function ne(){const e=i.useContext(x);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e}const J={en:{title:"Magical Story",subtitle:"Personalize your story to create magic",heroTitle:"Become the hero of your story",heroSubtitle:"",heroDescription:"Turn your wildest ideas into a breathtaking personalized tale.",bookText:"Get a beautifully printed book and make someone feel like the legend they truly are.",startJourney:"Start Your Adventure",selectLanguage:"Choose your language",login:"Login",register:"Register",logout:"Logout",username:"Username",password:"Password",email:"Email (optional)",welcomeBack:"Welcome Back!",createAccount:"Create Account",noAccount:"Don't have an account?",haveAccount:"Already have an account?",signUp:"Sign up",signIn:"Sign in",loginRequired:"Please login to continue",continueWithGoogle:"Continue with Google",continueWithApple:"Continue with Apple",orContinueWith:"or continue with",forgotPassword:"Forgot password?",resetPassword:"Reset Password",resetPasswordDesc:"Enter your email and we'll send you a reset link",sendResetLink:"Send Reset Link",resetLinkSent:"Password reset email sent! Check your inbox.",backToLogin:"Back to login",chooseStoryType:"Choose Your Story Type",chooseArtStyle:"Choose Your Art Style",artStyleDescription:"Select the visual style for your story",addCustomStoryType:"Add Custom Story Type",storyTypeName:"Story Type Name",storyTypeEmoji:"Emoji",addStoryType:"Add",createCharacters:"Create Your Characters",characterCreated:"Character Created!",createAnother:"Create Another Character",continueToRelationships:"Continue to Relationships",yourCharacters:"Your Characters:",startCreating:"Start Creating Character",characterName:"Character Name",characterPhoto:"Character Photo",uploadPhoto:"Upload Photo",uploadPhotoFirst:"Please upload a photo to continue",photoGoodExamples:"Good: Full body or upper body",photoBadExamples:"Avoid: Close-up face only, sunglasses, hats, helmets, blurry",orDescribe:"OR describe the character",characterAge:"Age",hairColor:"Hair Color",otherFeatures:"Other Features",descriptionPlaceholder:"e.g., Blue eyes, wears glasses, has freckles",gender:"Gender",male:"Male",female:"Female",other:"Unknown",age:"Age",strengths:"Strengths",weaknesses:"Weaknesses",selectAtLeast:"Select at least",selected:"Selected",addCustomStrengths:"Add custom strengths",addCustomWeaknesses:"Add custom weaknesses",addCustomFears:"Add custom fears",specialDetails:"Hobbies, Hopes & Fears, Favourite Animals and Other Details",specialDetailsPlaceholder:"e.g., Enjoys painting, dreams of becoming an astronaut, scared of spiders, loves horses",fears:"Fears",addCustomRelationship:"Add custom relationship",cancel:"Cancel",saveCharacter:"Save Character",editCharacter:"Edit",deleteCharacter:"Delete",defineRelationships:"Define Character Relationships",defineRelationshipsDesc:"Define how each character relates to the others.",is:"is",reverseRelationship:"Reverse relationship:",storySettings:"Story Settings",selectMainCharacters:"Select Main Characters (max 2)",numberOfPages:"Number of Pages",readingLevel:"Reading Level",firstGrade:"Picture Book",firstGradeDesc:"Image and text on both pages",standard:"Standard",standardDesc:"Text on one page, image on the other",advanced:"Advanced",advancedDesc:"Longer text, image on opposite page",generateStory:"Generate Story!",creating:"Creating Your Story...",storyReady:"Your Story is Ready!",downloadTXT:"Download as TXT",downloadPDF:"Download as PDF",downloadPrompt:"Download Prompt",viewPrompt:"View Prompt",hidePrompt:"Hide Prompt",promptUsed:"Prompt Used to Generate Story:",createAnotherStory:"Create Another Story",back:"Back",next:"Next",exportConfig:"Export Configuration",exportStoryInfo:"Export Story Info (MD)",importConfig:"Import Configuration",charactersCreated:"You've created {count} character{s} so far.",mainCharacter:"Main Character",apiKeyRequired:"API Key Required",apiKeyPrompt:"Please enter your Anthropic API key to generate stories:",apiKeyPlaceholder:"sk-ant-...",saveApiKey:"Save API Key",apiKeyNote:"Your API key is stored locally in your browser and never sent anywhere except to Anthropic.",promptPreview:"Prompt Preview",showPromptPreview:"Show Prompt",hidePromptPreview:"Hide Prompt",editPrompt:"Edit Prompt",resetPrompt:"Reset to Default",storyDetails:"Additional Story Details (Optional)",storyDetailsPlaceholder:"e.g., Location: Enchanted forest, Special elements: Magical talking animals, Time period: Medieval times...",generateOutline:"Generate Outline",generatingOutline:"Generating Outline...",outlineReady:"Story Outline",editOutline:"You can edit the outline below before generating the full story:",regenerateOutline:"Regenerate Outline",createScenes:"Create Scene Descriptions",creatingScenes:"Creating Scene Descriptions...",scenesReady:"Scene Descriptions",downloadScenes:"Download Scenes",sceneForPage:"Scene for Page",yourStory:"Your Story",uploadStory:"Upload Story",uploadStoryDesc:"Upload an existing story text file to generate scene descriptions",generateImages:"Generate Scene Images",generatingImages:"Generating Images...",imagesReady:"Scene Images",downloadImage:"Download Image",geminiApiKey:"Gemini API Key",geminiApiKeyPrompt:"Enter your Google Gemini API key to generate images:",geminiApiKeyNote:"Get your key from Google AI Studio",imageForPage:"Image for Page",generateAvatar:"Generate Pixar Avatar",generatingAvatar:"Generating Avatar...",avatarGenerated:"Avatar Generated!",useGeneratedAvatar:"Use Generated Avatar",keepOriginal:"Keep Original Photo",uploadType:"What are you uploading?",uploadRealPhoto:"Real Photo (will generate avatar)",uploadReadyAvatar:"Ready Avatar (already stylized)",editStory:"Edit Story",saveStory:"Save Story",editScene:"Edit Scene",saveScene:"Save Scene",editImage:"Edit Image",regenerateImage:"Regenerate Image",showEditPrompt:"Show Prompt",hideEditPrompt:"Hide Prompt",editInstruction:"What should be changed?",applyEdit:"Apply Edit"},de:{title:"Magical Story",subtitle:"Personalisiere deine Geschichte für Magie",heroTitle:"Werde zum Helden deiner Geschichte",heroSubtitle:"",heroDescription:"Verwandle deine wildesten Ideen in eine atemberaubende personalisierte Geschichte.",bookText:"Erhalte ein wunderschön gedrucktes Buch und gib jemandem das Gefühl, die Legende zu sein, die er wirklich ist.",startJourney:"Starte dein Abenteuer",selectLanguage:"Wähle deine Sprache",login:"Anmelden",register:"Registrieren",logout:"Abmelden",username:"Benutzername",password:"Passwort",email:"E-Mail (optional)",welcomeBack:"Willkommen zurück!",createAccount:"Konto erstellen",noAccount:"Noch kein Konto?",haveAccount:"Bereits ein Konto?",signUp:"Registrieren",signIn:"Anmelden",loginRequired:"Bitte melde dich an, um fortzufahren",continueWithGoogle:"Mit Google fortfahren",continueWithApple:"Mit Apple fortfahren",orContinueWith:"oder fortfahren mit",forgotPassword:"Passwort vergessen?",resetPassword:"Passwort zurücksetzen",resetPasswordDesc:"Gib deine E-Mail ein und wir senden dir einen Link zum Zurücksetzen",sendResetLink:"Link senden",resetLinkSent:"E-Mail zum Zurücksetzen gesendet! Überprüfe deinen Posteingang.",backToLogin:"Zurück zur Anmeldung",chooseStoryType:"Wähle deinen Geschichtentyp",chooseArtStyle:"Wähle deinen Kunststil",artStyleDescription:"Wähle den visuellen Stil für deine Geschichte",addCustomStoryType:"Eigenen Geschichtentyp hinzufügen",storyTypeName:"Name des Geschichtentyps",storyTypeEmoji:"Emoji",addStoryType:"Hinzufügen",createCharacters:"Erstelle deine Charaktere",characterCreated:"Charakter erstellt!",createAnother:"Weiteren Charakter erstellen",continueToRelationships:"Weiter zu Beziehungen",yourCharacters:"Deine Charaktere:",startCreating:"Charakter erstellen beginnen",characterName:"Charaktername",characterPhoto:"Charakterfoto",uploadPhoto:"Foto hochladen",uploadPhotoFirst:"Bitte laden Sie ein Foto hoch, um fortzufahren",photoGoodExamples:"Gut: Ganzkörper oder Oberkörper",photoBadExamples:"Vermeiden: Nur Gesicht, Sonnenbrille, Hüte, Helme, unscharf",orDescribe:"ODER Figur beschreiben",characterAge:"Alter",hairColor:"Haarfarbe",otherFeatures:"Sonstige Merkmale",descriptionPlaceholder:"z.B. Blaue Augen, trägt Brille, hat Sommersprossen",gender:"Geschlecht",male:"Männlich",female:"Weiblich",other:"Unbekannt",age:"Alter",strengths:"Stärken",weaknesses:"Schwächen",selectAtLeast:"Wähle mindestens",selected:"Ausgewählt",addCustomStrengths:"Eigene Stärken hinzufügen",addCustomWeaknesses:"Eigene Schwächen hinzufügen",addCustomFears:"Eigene Ängste hinzufügen",specialDetails:"Hobbys, Hoffnungen & Ängste, Lieblingstiere und andere Besonderheiten",specialDetailsPlaceholder:"z.B. Malt gerne, träumt davon Astronaut zu werden, hat Angst vor Spinnen, liebt Pferde",fears:"Ängste",addCustomRelationship:"Eigene Beziehung hinzufügen",cancel:"Abbrechen",saveCharacter:"Charakter speichern",editCharacter:"Bearbeiten",deleteCharacter:"Löschen",defineRelationships:"Charakterbeziehungen definieren",defineRelationshipsDesc:"Definiere, wie die Charaktere zueinander stehen.",is:"ist",reverseRelationship:"Umgekehrte Beziehung:",storySettings:"Geschichten-Einstellungen",selectMainCharacters:"Hauptfiguren auswählen (max 2)",numberOfPages:"Anzahl der Seiten",readingLevel:"Lesestufe",firstGrade:"Bilderbuch",firstGradeDesc:"Bild und Text auf beiden Seiten",standard:"Standard",standardDesc:"Text auf einer Seite, Bild auf der anderen",advanced:"Fortgeschritten",advancedDesc:"Längerer Text, Bild auf der gegenüberliegenden Seite",generateStory:"Geschichte erstellen!",creating:"Erstelle deine Geschichte...",storyReady:"Deine Geschichte ist fertig!",downloadTXT:"Als TXT herunterladen",downloadPDF:"Als PDF herunterladen",downloadPrompt:"Prompt herunterladen",viewPrompt:"Prompt anzeigen",hidePrompt:"Prompt ausblenden",promptUsed:"Verwendeter Prompt:",createAnotherStory:"Neue Geschichte erstellen",back:"Zurück",next:"Weiter",exportConfig:"Konfiguration exportieren",exportStoryInfo:"Story-Info exportieren (MD)",importConfig:"Konfiguration importieren",charactersCreated:"Du hast bisher {count} Charakter{s} erstellt.",mainCharacter:"Hauptfigur",apiKeyRequired:"API-Schlüssel erforderlich",apiKeyPrompt:"Bitte geben Sie Ihren Anthropic API-Schlüssel ein:",apiKeyPlaceholder:"sk-ant-...",saveApiKey:"API-Schlüssel speichern",apiKeyNote:"Ihr API-Schlüssel wird lokal im Browser gespeichert.",promptPreview:"Prompt-Vorschau",showPromptPreview:"Prompt anzeigen",hidePromptPreview:"Prompt ausblenden",editPrompt:"Prompt bearbeiten",resetPrompt:"Auf Standard zurücksetzen",storyDetails:"Zusätzliche Story-Details (Optional)",storyDetailsPlaceholder:"z.B. Ort: Verzauberter Wald, Besondere Elemente: Magische sprechende Tiere, Zeitperiode: Mittelalter...",generateOutline:"Gliederung erstellen",generatingOutline:"Gliederung wird erstellt...",outlineReady:"Story-Gliederung",editOutline:"Sie können die Gliederung unten bearbeiten, bevor Sie die vollständige Geschichte erstellen:",regenerateOutline:"Gliederung neu erstellen",createScenes:"Szenen-Beschreibungen erstellen",creatingScenes:"Szenen-Beschreibungen werden erstellt...",scenesReady:"Szenen-Beschreibungen",downloadScenes:"Szenen herunterladen",sceneForPage:"Szene für Seite",yourStory:"Deine Geschichte",uploadStory:"Geschichte hochladen",uploadStoryDesc:"Laden Sie eine vorhandene Story-Textdatei hoch, um Szenenbeschreibungen zu generieren",generateImages:"Szenenbilder generieren",generatingImages:"Bilder werden generiert...",imagesReady:"Szenenbilder",downloadImage:"Bild herunterladen",geminiApiKey:"Gemini API-Schlüssel",geminiApiKeyPrompt:"Geben Sie Ihren Google Gemini API-Schlüssel ein:",geminiApiKeyNote:"Holen Sie sich Ihren Schlüssel von Google AI Studio",imageForPage:"Bild für Seite",generateAvatar:"Pixar-Avatar erstellen",generatingAvatar:"Avatar wird erstellt...",avatarGenerated:"Avatar erstellt!",useGeneratedAvatar:"Generierten Avatar verwenden",keepOriginal:"Originalfoto behalten",uploadType:"Was laden Sie hoch?",uploadRealPhoto:"Echtes Foto (Avatar wird generiert)",uploadReadyAvatar:"Fertiger Avatar (bereits stilisiert)",editStory:"Geschichte bearbeiten",saveStory:"Geschichte speichern",editScene:"Szene bearbeiten",saveScene:"Szene speichern",editImage:"Bild bearbeiten",regenerateImage:"Bild neu generieren",showEditPrompt:"Prompt anzeigen",hideEditPrompt:"Prompt ausblenden",editInstruction:"Was soll geändert werden?",applyEdit:"Änderung anwenden"},fr:{title:"Magical Story",subtitle:"Personnalisez votre histoire pour créer la magie",heroTitle:"Devenez le héros de votre histoire",heroSubtitle:"",heroDescription:"Transformez vos idées les plus folles en un conte personnalisé époustouflant.",bookText:"Obtenez un livre magnifiquement imprimé et donnez à quelqu'un le sentiment d'être la légende qu'il est vraiment.",startJourney:"Commencez Votre Aventure",selectLanguage:"Choisissez votre langue",login:"Connexion",register:"S'inscrire",logout:"Déconnexion",username:"Nom d'utilisateur",password:"Mot de passe",email:"Email (facultatif)",welcomeBack:"Bon retour !",createAccount:"Créer un compte",noAccount:"Pas encore de compte ?",haveAccount:"Vous avez déjà un compte ?",signUp:"S'inscrire",signIn:"Se connecter",loginRequired:"Veuillez vous connecter pour continuer",continueWithGoogle:"Continuer avec Google",continueWithApple:"Continuer avec Apple",orContinueWith:"ou continuer avec",forgotPassword:"Mot de passe oublié ?",resetPassword:"Réinitialiser le mot de passe",resetPasswordDesc:"Entrez votre e-mail et nous vous enverrons un lien de réinitialisation",sendResetLink:"Envoyer le lien",resetLinkSent:"E-mail de réinitialisation envoyé ! Vérifiez votre boîte de réception.",backToLogin:"Retour à la connexion",chooseStoryType:"Choisissez Votre Type d'Histoire",chooseArtStyle:"Choisissez Votre Style Artistique",artStyleDescription:"Sélectionnez le style visuel pour votre histoire",addCustomStoryType:"Ajouter un Type d'Histoire Personnalisé",storyTypeName:"Nom du Type d'Histoire",storyTypeEmoji:"Emoji",addStoryType:"Ajouter",createCharacters:"Créez Vos Personnages",characterCreated:"Personnage Créé !",createAnother:"Créer un Autre Personnage",continueToRelationships:"Continuer vers les Relations",yourCharacters:"Vos Personnages :",startCreating:"Commencer à Créer un Personnage",characterName:"Nom du Personnage",characterPhoto:"Photo du Personnage",uploadPhoto:"Télécharger une Photo",uploadPhotoFirst:"Veuillez télécharger une photo pour continuer",photoGoodExamples:"Bien : Corps entier ou buste",photoBadExamples:"Éviter : Gros plan visage, lunettes de soleil, chapeaux, casques, flou",orDescribe:"OU décrivez le personnage",characterAge:"Âge",hairColor:"Couleur des Cheveux",otherFeatures:"Autres Caractéristiques",descriptionPlaceholder:"ex. Yeux bleus, porte des lunettes, a des taches de rousseur",gender:"Genre",male:"Masculin",female:"Féminin",other:"Inconnu",age:"Âge",strengths:"Forces",weaknesses:"Faiblesses",selectAtLeast:"Sélectionnez au moins",selected:"Sélectionné",addCustomStrengths:"Ajouter des forces personnalisées",addCustomWeaknesses:"Ajouter des faiblesses personnalisées",addCustomFears:"Ajouter des peurs personnalisées",specialDetails:"Loisirs, Espoirs & Peurs, Animaux Préférés et Autres Détails",specialDetailsPlaceholder:"ex. Aime peindre, rêve de devenir astronaute, a peur des araignées, adore les chevaux",fears:"Peurs",addCustomRelationship:"Ajouter une relation personnalisée",cancel:"Annuler",saveCharacter:"Enregistrer le Personnage",editCharacter:"Modifier",deleteCharacter:"Supprimer",defineRelationships:"Définir les Relations entre Personnages",defineRelationshipsDesc:"Définissez comment chaque personnage est lié aux autres.",is:"est",reverseRelationship:"Relation inverse :",storySettings:"Paramètres de l'Histoire",selectMainCharacters:"Sélectionner les Personnages Principaux (max 2)",numberOfPages:"Nombre de Pages",readingLevel:"Niveau de Lecture",firstGrade:"Livre d'Images",firstGradeDesc:"Image et texte sur les deux pages",standard:"Standard",standardDesc:"Texte sur une page, image sur l'autre",advanced:"Avancé",advancedDesc:"Texte plus long, image sur la page opposée",generateStory:"Générer l'Histoire !",creating:"Création de Votre Histoire...",storyReady:"Votre Histoire est Prête !",downloadTXT:"Télécharger en TXT",downloadPDF:"Télécharger en PDF",downloadPrompt:"Télécharger le Prompt",viewPrompt:"Voir le Prompt",hidePrompt:"Masquer le Prompt",promptUsed:"Prompt Utilisé pour Générer l'Histoire :",createAnotherStory:"Créer une Autre Histoire",back:"Retour",next:"Suivant",exportConfig:"Exporter la Configuration",exportStoryInfo:"Exporter les Infos (MD)",importConfig:"Importer la Configuration",charactersCreated:"Vous avez créé {count} personnage{s} jusqu'à présent.",mainCharacter:"Personnage Principal",apiKeyRequired:"Clé API Requise",apiKeyPrompt:"Veuillez entrer votre clé API Anthropic pour générer des histoires :",apiKeyPlaceholder:"sk-ant-...",saveApiKey:"Enregistrer la Clé API",apiKeyNote:"Votre clé API est stockée localement dans votre navigateur.",promptPreview:"Aperçu du Prompt",showPromptPreview:"Afficher le Prompt",hidePromptPreview:"Masquer le Prompt",editPrompt:"Modifier le Prompt",resetPrompt:"Réinitialiser par Défaut",storyDetails:"Détails Supplémentaires de l'Histoire (Optionnel)",storyDetailsPlaceholder:"ex. Lieu : Forêt enchantée, Éléments spéciaux : Animaux magiques parlants, Période : Moyen Âge...",generateOutline:"Générer le Plan",generatingOutline:"Génération du Plan...",outlineReady:"Plan de l'Histoire",editOutline:"Vous pouvez modifier le plan ci-dessous avant de générer l'histoire complète :",regenerateOutline:"Regénérer le Plan",createScenes:"Créer les Descriptions de Scènes",creatingScenes:"Création des Descriptions de Scènes...",scenesReady:"Descriptions de Scènes",downloadScenes:"Télécharger les Scènes",sceneForPage:"Scène pour la Page",yourStory:"Votre Histoire",uploadStory:"Télécharger une Histoire",uploadStoryDesc:"Téléchargez un fichier texte existant pour générer des descriptions de scènes",generateImages:"Générer les Images de Scènes",generatingImages:"Génération des Images...",imagesReady:"Images de Scènes",downloadImage:"Télécharger l'Image",geminiApiKey:"Clé API Gemini",geminiApiKeyPrompt:"Entrez votre clé API Google Gemini pour générer des images :",geminiApiKeyNote:"Obtenez votre clé sur Google AI Studio",imageForPage:"Image pour la Page",generateAvatar:"Générer un Avatar Pixar",generatingAvatar:"Génération de l'Avatar...",avatarGenerated:"Avatar Généré !",useGeneratedAvatar:"Utiliser l'Avatar Généré",keepOriginal:"Garder la Photo Originale",uploadType:"Que téléchargez-vous ?",uploadRealPhoto:"Photo réelle (avatar sera généré)",uploadReadyAvatar:"Avatar prêt (déjà stylisé)",editStory:"Modifier l'Histoire",saveStory:"Enregistrer l'Histoire",editScene:"Modifier la Scène",saveScene:"Enregistrer la Scène",editImage:"Modifier l'Image",regenerateImage:"Regénérer l'Image",showEditPrompt:"Afficher le Prompt",hideEditPrompt:"Masquer le Prompt",editInstruction:"Que faut-il changer ?",applyEdit:"Appliquer la Modification"}},k=i.createContext(null),I="magicalstory_language";function $(){const e=navigator.language.toLowerCase();return e.startsWith("de")?"de":e.startsWith("fr")?"fr":"en"}function X({children:e}){const[r,t]=i.useState(()=>{const o=localStorage.getItem(I);return o&&["en","de","fr"].includes(o)?o:$()});i.useEffect(()=>{localStorage.setItem(I,r),document.documentElement.lang=r},[r]);const y=o=>{t(o)},a=J[r];return l.jsx(k.Provider,{value:{language:r,setLanguage:y,t:a},children:e})}function Q(){const e=i.useContext(k);if(!e)throw new Error("useTranslation must be used within a LanguageProvider");return e}const ae=Q,G={storyType:"",artStyle:"",storyDetails:"",characters:[],currentCharacterId:null,relationships:{},relationshipTexts:{},pages:30,languageLevel:"standard",mainCharacters:[],dedication:"",storyOutline:"",generatedStory:"",storyTitle:"",sceneDescriptions:[],sceneImages:[],coverImages:{frontCover:null,initialPage:null,backCover:null},isGenerating:!1,generationProgress:null,currentStoryId:null,currentStep:0};function Z(e,r){switch(r.type){case"SET_STORY_TYPE":return{...e,storyType:r.payload};case"SET_ART_STYLE":return{...e,artStyle:r.payload};case"SET_STORY_DETAILS":return{...e,storyDetails:r.payload};case"ADD_CHARACTER":return{...e,characters:[...e.characters,r.payload]};case"UPDATE_CHARACTER":return{...e,characters:e.characters.map(t=>t.id===r.payload.id?r.payload:t)};case"DELETE_CHARACTER":return{...e,characters:e.characters.filter(t=>t.id!==r.payload),mainCharacters:e.mainCharacters.filter(t=>t!==r.payload)};case"SET_CURRENT_CHARACTER":return{...e,currentCharacterId:r.payload};case"SET_CHARACTERS":return{...e,characters:r.payload};case"SET_RELATIONSHIP":return{...e,relationships:{...e.relationships,[r.payload.key]:r.payload.value}};case"SET_RELATIONSHIP_TEXT":return{...e,relationshipTexts:{...e.relationshipTexts,[r.payload.key]:r.payload.value}};case"SET_RELATIONSHIPS":return{...e,relationships:r.payload};case"SET_PAGES":return{...e,pages:r.payload};case"SET_LANGUAGE_LEVEL":return{...e,languageLevel:r.payload};case"SET_MAIN_CHARACTERS":return{...e,mainCharacters:r.payload};case"SET_DEDICATION":return{...e,dedication:r.payload};case"SET_OUTLINE":return{...e,storyOutline:r.payload};case"SET_GENERATED_STORY":return{...e,generatedStory:r.payload.story,storyTitle:r.payload.title};case"SET_SCENE_DESCRIPTIONS":return{...e,sceneDescriptions:r.payload};case"SET_SCENE_IMAGE":return{...e,sceneImages:[...e.sceneImages.filter(t=>t.pageNumber!==r.payload.pageNumber),r.payload].sort((t,y)=>t.pageNumber-y.pageNumber)};case"SET_COVER_IMAGES":return{...e,coverImages:{...e.coverImages,...r.payload}};case"SET_GENERATING":return{...e,isGenerating:r.payload};case"SET_GENERATION_PROGRESS":return{...e,generationProgress:r.payload};case"SET_CURRENT_STORY_ID":return{...e,currentStoryId:r.payload};case"SET_STEP":return{...e,currentStep:r.payload};case"LOAD_STORY":return{...e,...r.payload};case"RESET_STORY":return{...G};default:return e}}const ee=i.createContext(null);function re({children:e}){const[r,t]=i.useReducer(Z,G);return l.jsx(ee.Provider,{value:{state:r,dispatch:t},children:e})}F.createRoot(document.getElementById("root")).render(l.jsx(i.StrictMode,{children:l.jsx(L,{children:l.jsx(X,{children:l.jsx(Y,{children:l.jsx(re,{children:l.jsx(V,{})})})})})}));export{K as L,ne as a,l as j,ae as u};
