import{c as f,u as p,a as S,j as e,C as j,L as I}from"./index-CXAb6uFo.js";import{u as k,b as c}from"./vendor-react-CHhk3aw2.js";import{B as l}from"./api-CKboMWuP.js";import{N}from"./Textarea-DlsK7rW3.js";import{S as b}from"./sparkles-rDMLibBj.js";import"./vendor-firebase-DTVMaYMy.js";import"./book-open-DS3xtjDV.js";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=f("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=f("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),w={en:{title:"Email Verified!",checkingOtherWindow:"Please return to your original browser window where your story should now be generating...",generatingInOtherWindow:"Your story is being generated in your other browser window!",otherWindowHint:"You can close this tab and return to your original window.",manualHint:"Your original window may have been closed. Click below to create your story.",notLoggedInHint:"Please log in to create your story.",createStory:"Create Your Story",login:"Log In",goHome:"Go to Homepage"},de:{title:"E-Mail bestätigt!",checkingOtherWindow:"Bitte kehren Sie zu Ihrem ursprünglichen Browserfenster zurück, wo Ihre Geschichte nun generiert werden sollte...",generatingInOtherWindow:"Ihre Geschichte wird im anderen Browserfenster generiert!",otherWindowHint:"Sie können diesen Tab schließen und zu Ihrem ursprünglichen Fenster zurückkehren.",manualHint:"Ihr ursprüngliches Fenster wurde möglicherweise geschlossen. Klicken Sie unten, um Ihre Geschichte zu erstellen.",notLoggedInHint:"Bitte melden Sie sich an, um Ihre Geschichte zu erstellen.",createStory:"Geschichte erstellen",login:"Anmelden",goHome:"Zur Startseite"},fr:{title:"E-mail verifie!",checkingOtherWindow:"Veuillez retourner a votre fenetre de navigateur d'origine ou votre histoire devrait maintenant etre generee...",generatingInOtherWindow:"Votre histoire est en cours de generation dans votre autre fenetre!",otherWindowHint:"Vous pouvez fermer cet onglet et retourner a votre fenetre d'origine.",manualHint:"Votre fenetre d'origine a peut-etre ete fermee. Cliquez ci-dessous pour creer votre histoire.",notLoggedInHint:"Veuillez vous connecter pour creer votre histoire.",createStory:"Creer votre histoire",login:"Se connecter",goHome:"Aller a l'accueil"}};function R(){const n=k(),{language:x}=p(),{user:y,refreshUser:h}=S(),r=w[x]||w.en,m=!!y,[t,o]=c.useState("checking"),i=c.useRef(!0),a=c.useRef(!1);return c.useEffect(()=>{if(i.current=!0,a.current)return;const u=s=>{if(!s)return!1;const d=parseInt(s,10),g=Date.now()-120*1e3;return d>g};return(async()=>{const s=localStorage.getItem("verificationGenerationStarted");if(u(s)){i.current&&(a.current=!0,o("other_window"),localStorage.removeItem("pendingStoryGeneration"));return}if(await h(),!i.current)return;const d=localStorage.getItem("verificationGenerationStarted");if(u(d)){a.current=!0,o("other_window"),localStorage.removeItem("pendingStoryGeneration");return}if(await new Promise(v=>setTimeout(v,1e4)),!i.current)return;const g=localStorage.getItem("verificationGenerationStarted");a.current=!0,u(g)?(o("other_window"),localStorage.removeItem("pendingStoryGeneration")):(o("manual"),localStorage.removeItem("pendingStoryGeneration"))})(),()=>{i.current=!1}},[n,h]),e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[e.jsx(N,{currentStep:0}),e.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg max-w-md w-full p-8 text-center",children:[e.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 ${t==="other_window"?"bg-indigo-100":"bg-green-100"}`,children:t==="other_window"?e.jsx(G,{className:"w-10 h-10 text-indigo-600"}):e.jsx(j,{className:"w-10 h-10 text-green-600"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-3",children:r.title}),t==="checking"&&e.jsx("div",{className:"mb-8",children:e.jsxs("p",{className:"text-gray-600 flex items-center justify-center gap-2",children:[e.jsx(I,{className:"w-5 h-5 animate-spin"}),r.checkingOtherWindow]})}),t==="other_window"&&e.jsxs("div",{className:"mb-8",children:[e.jsx("p",{className:"text-indigo-600 font-medium mb-2",children:r.generatingInOtherWindow}),e.jsx("p",{className:"text-gray-500 text-sm",children:r.otherWindowHint})]}),t==="manual"&&e.jsxs("div",{className:"mb-8",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:m?r.manualHint:r.notLoggedInHint}),e.jsxs("div",{className:"space-y-3",children:[m?e.jsxs(l,{onClick:()=>n("/create"),variant:"primary",className:"w-full",children:[e.jsx(b,{size:18,className:"mr-2"}),r.createStory]}):e.jsxs(l,{onClick:()=>n("/?login=true&redirect=%2Fcreate"),variant:"primary",className:"w-full",children:[e.jsx(H,{size:18,className:"mr-2"}),r.login]}),e.jsx(l,{onClick:()=>n("/"),variant:"secondary",className:"w-full",children:r.goHome})]})]}),t==="other_window"&&e.jsx("div",{className:"space-y-3 mt-6",children:e.jsx(l,{onClick:()=>n("/"),variant:"secondary",className:"w-full",children:r.goHome})})]})})]})}export{R as default};
