const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LandingPage-DEu3Xazv.js","assets/vendor-react-k5uhsfqB.js","assets/Input-CpbPYL2D.js","assets/Textarea--lz6i3Nw.js","assets/sparkles-BQyvys3o.js","assets/arrow-right-BnHW-Q2s.js","assets/vendor-firebase-Ksn6Afo7.js","assets/StoryWizard-Cegusrzp.js","assets/refresh-cw-Bu0w2tbv.js","assets/check-BrwG01TW.js","assets/trash-2-EmKqZzT7.js","assets/api-CL93LcKs.js","assets/circle-x-BNM3_kok.js","assets/clock-CCIqG53c.js","assets/shopping-cart-TyZNi3y_.js","assets/storyService-BRCB8oGK.js","assets/MyStories-BIBZTGQM.js","assets/Pricing-CGdOOFxS.js","assets/MyOrders-BnAkQQXO.js","assets/AdminDashboard-BU-KfNIu.js","assets/printer-C1ZlzbXr.js","assets/BookBuilder-DyvQWj8T.js","assets/ResetPassword-4ZyUDQap.js","assets/EmailVerified-BktBU3zi.js"])))=>i.map(i=>d[i]);
import{r as ce,a as ue,b as o,u as de,R as ge,c as C,B as pe}from"./vendor-react-k5uhsfqB.js";import{i as he,g as me,G as fe,s as ye,b as W,a as Se,c as ve,o as we,d as Ae}from"./vendor-firebase-Ksn6Afo7.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))p(s);new MutationObserver(s=>{for(const u of s)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&p(h)}).observe(document,{childList:!0,subtree:!0});function t(s){const u={};return s.integrity&&(u.integrity=s.integrity),s.referrerPolicy&&(u.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?u.credentials="include":s.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function p(s){if(s.ep)return;s.ep=!0;const u=t(s);fetch(s.href,u)}})();var O={exports:{}},_={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $;function Pe(){if($)return _;$=1;var e=ce(),r=Symbol.for("react.element"),t=Symbol.for("react.fragment"),p=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function h(c,d,g){var m,A={},S=null,b=null;g!==void 0&&(S=""+g),d.key!==void 0&&(S=""+d.key),d.ref!==void 0&&(b=d.ref);for(m in d)p.call(d,m)&&!u.hasOwnProperty(m)&&(A[m]=d[m]);if(c&&c.defaultProps)for(m in d=c.defaultProps,d)A[m]===void 0&&(A[m]=d[m]);return{$$typeof:r,type:c,key:S,ref:b,props:A,_owner:s.current}}return _.Fragment=t,_.jsx=h,_.jsxs=h,_}var B;function be(){return B||(B=1,O.exports=Pe()),O.exports}var n=be(),D={},V;function Ce(){if(V)return D;V=1;var e=ue();return D.createRoot=e.createRoot,D.hydrateRoot=e.hydrateRoot,D}var Ee=Ce();const xe="modulepreload",ke=function(e){return"/"+e},F={},E=function(r,t,p){let s=Promise.resolve();if(t&&t.length>0){let h=function(g){return Promise.all(g.map(m=>Promise.resolve(m).then(A=>({status:"fulfilled",value:A}),A=>({status:"rejected",reason:A}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));s=h(t.map(g=>{if(g=ke(g),g in F)return;F[g]=!0;const m=g.endsWith(".css"),A=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${A}`))return;const S=document.createElement("link");if(S.rel=m?"stylesheet":xe,m||(S.as="script"),S.crossOrigin="",S.href=g,d&&S.setAttribute("nonce",d),document.head.appendChild(S),m)return new Promise((b,k)=>{S.addEventListener("load",b),S.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${g}`)))})}))}function u(h){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=h,window.dispatchEvent(c),!c.defaultPrevented)throw h}return s.then(h=>{for(const c of h||[])c.status==="rejected"&&u(c.reason);return r().catch(u)})};function Ie({size:e="md",fullScreen:r=!1,message:t}){const p={sm:"w-6 h-6 border-2",md:"w-10 h-10 border-3",lg:"w-16 h-16 border-4"},s=n.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[n.jsx("div",{className:`${p[e]} spinner`}),t&&n.jsx("p",{className:"text-indigo-600 font-medium",children:t})]});return r?n.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 flex items-center justify-center z-50",children:s}):s}let w={isAdmin:!1,prefix:"ðŸª„"};const T={debug:"color: #9ca3af; font-weight: normal;",info:"color: #6366f1; font-weight: normal;",warn:"color: #f59e0b; font-weight: bold;",error:"color: #ef4444; font-weight: bold;",success:"color: #22c55e; font-weight: bold;"};function Re(e){w={...w,...e},w.isAdmin&&console.log("%cðŸ”“ Admin logging enabled",T.success)}function Te(){return w.isAdmin}function U(e,...r){w.isAdmin&&console.log(`%c${w.prefix} [DEBUG] ${e}`,T.debug,...r)}function q(e,...r){w.isAdmin&&console.log(`%c${w.prefix} [INFO] ${e}`,T.info,...r)}function H(e,...r){w.isAdmin&&console.log(`%c${w.prefix} âœ“ ${e}`,T.success,...r)}function K(e,...r){console.warn(`%c${w.prefix} [WARN] ${e}`,T.warn,...r)}function J(e,...r){console.error(`%c${w.prefix} [ERROR] ${e}`,T.error,...r)}function Y(e){w.isAdmin&&console.group(`${w.prefix} ${e}`)}function X(){w.isAdmin&&console.groupEnd()}function Z(e){w.isAdmin&&console.table(e)}function Q(e){w.isAdmin&&console.time(`${w.prefix} ${e}`)}function ee(e){w.isAdmin&&console.timeEnd(`${w.prefix} ${e}`)}function _e(e){const r=`[${e}]`;return{debug:(t,...p)=>U(`${r} ${t}`,...p),info:(t,...p)=>q(`${r} ${t}`,...p),success:(t,...p)=>H(`${r} ${t}`,...p),warn:(t,...p)=>K(`${r} ${t}`,...p),error:(t,...p)=>J(`${r} ${t}`,...p),group:t=>Y(`${r} ${t}`),groupEnd:X,table:Z,time:t=>Q(`${r} ${t}`),timeEnd:t=>ee(`${r} ${t}`)}}const v={configure:Re,isVerbose:Te,debug:U,info:q,success:H,warn:K,error:J,group:Y,groupEnd:X,table:Z,time:Q,timeEnd:ee,create:_e},Le={apiKey:"AIzaSyCtdyVIpckWhIfy1_9O8qOaEnTXFuiRYaQ",authDomain:"magical-story-3b745.firebaseapp.com",projectId:"magical-story-3b745",storageBucket:"magical-story-3b745.firebasestorage.app",messagingSenderId:"69965481554",appId:"1:69965481554:web:d264515ca92d2306f5018b",measurementId:"G-TERDSLHHDG"},De=he(Le),L=me(De),z=new fe;z.setCustomParameters({prompt:"select_account"});async function Ge(){try{return(await ye(L,z,W)).user}catch(e){const r=e;throw console.error("Popup sign-in failed:",r.code,r.message),r.code==="auth/popup-blocked"||r.code==="auth/popup-closed-by-user"||r.code==="auth/cancelled-popup-request"?(console.log("Popup failed, trying redirect..."),await Se(L,z),new Error("Redirecting to Google...")):e}}async function je(){try{const e=await Ae(L,W);return e?(console.log("Redirect result: user found"),e.user):null}catch(e){return console.error("Error handling redirect result:",e),null}}async function Oe(e){return e.getIdToken()}async function ze(){await ve(L)}function Ne(e){return we(L,e)}const re=o.createContext(null),x="";function $e({children:e}){const[r,t]=o.useState({isAuthenticated:!1,user:null,token:null,isImpersonating:!1,originalAdmin:null}),[p,s]=o.useState(!0),u=o.useRef(!1),h=o.useRef(!1);o.useEffect(()=>{const f=localStorage.getItem("token");f&&!localStorage.getItem("auth_token")&&(localStorage.setItem("auth_token",f),localStorage.removeItem("token"));const i=localStorage.getItem("auth_token"),a=localStorage.getItem("current_user");if(i&&a)try{const l=JSON.parse(a),y=localStorage.getItem("impersonation_state");let P=!1,I=null;if(y)try{const N=JSON.parse(y);P=N.isImpersonating||!1,I=N.originalAdmin||null}catch{localStorage.removeItem("impersonation_state")}t({isAuthenticated:!0,user:l,token:i,isImpersonating:P,originalAdmin:I}),v.configure({isAdmin:I?!0:l.role==="admin"}),v.info(`Session restored for ${l.username}${P?" (impersonating)":""}`)}catch{localStorage.removeItem("auth_token"),localStorage.removeItem("current_user"),localStorage.removeItem("impersonation_state")}s(!1)},[]);const c=o.useCallback(async(f,i)=>{const a=await fetch(`${x}/api/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:f,password:i})});if(!a.ok){const P=await a.json();throw new Error(P.error||"Login failed")}const l=await a.json(),y={id:l.user.id,username:l.user.username,email:l.user.email,role:l.user.role,credits:l.user.credits,preferredLanguage:l.user.preferredLanguage,emailVerified:l.user.emailVerified};if(localStorage.setItem("auth_token",l.token),localStorage.setItem("current_user",JSON.stringify(y)),localStorage.removeItem("impersonation_state"),l.user.preferredLanguage){const I={English:"en",German:"de",French:"fr"}[l.user.preferredLanguage]||"en";localStorage.setItem("magicalstory_language",I),window.dispatchEvent(new Event("languageUpdated"))}t({isAuthenticated:!0,user:y,token:l.token,isImpersonating:!1,originalAdmin:null}),v.configure({isAdmin:y.role==="admin"}),v.success(`Logged in as ${y.username} (${y.role})`)},[]),d=o.useCallback(async(f,i,a)=>{const l=await fetch(`${x}/api/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:f,password:i,email:a})});if(!l.ok){const y=await l.json();throw new Error(y.error||"Registration failed")}await c(f,i)},[c]),g=o.useCallback(async f=>{const i=await Oe(f),a=await fetch(`${x}/api/auth/firebase`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({idToken:i})});if(!a.ok){const P=await a.json();throw new Error(P.error||"Firebase authentication failed")}const l=await a.json(),y={id:l.user.id,username:l.user.username,email:l.user.email,role:l.user.role,credits:l.user.credits,preferredLanguage:l.user.preferredLanguage,emailVerified:l.user.emailVerified};if(localStorage.setItem("auth_token",l.token),localStorage.setItem("current_user",JSON.stringify(y)),localStorage.removeItem("impersonation_state"),l.user.preferredLanguage){const I={English:"en",German:"de",French:"fr"}[l.user.preferredLanguage]||"en";localStorage.setItem("magicalstory_language",I),window.dispatchEvent(new Event("languageUpdated"))}t({isAuthenticated:!0,user:y,token:l.token,isImpersonating:!1,originalAdmin:null}),v.configure({isAdmin:y.role==="admin"}),v.success(`Logged in with Google as ${y.username}`)},[]),m=o.useCallback(async()=>{sessionStorage.setItem("auth_redirect_after_login","/create");const f=await Ge();await g(f),sessionStorage.removeItem("auth_redirect_after_login")},[g]),A=o.useCallback(async f=>{const i=await fetch(`${x}/api/auth/reset-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:f})});if(!i.ok){const a=await i.json();throw new Error(a.error||"Password reset failed")}},[]),S=o.useCallback(async(f,i)=>{const a=localStorage.getItem("auth_token");if(!a)throw new Error("Not authenticated");const l=await fetch(`${x}/api/auth/change-password`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({currentPassword:f,newPassword:i})});if(!l.ok){const y=await l.json();throw new Error(y.error||"Password change failed")}v.success("Password changed successfully")},[]),b=o.useCallback(()=>{v.info("Logging out..."),localStorage.removeItem("auth_token"),localStorage.removeItem("current_user"),localStorage.removeItem("impersonation_state"),ze().catch(f=>{console.warn("Firebase sign out error:",f)}),t({isAuthenticated:!1,user:null,token:null,isImpersonating:!1,originalAdmin:null}),v.configure({isAdmin:!1})},[]),k=o.useCallback(async f=>{const i=await fetch(`${x}/api/admin/impersonate/${f}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r.token}`}});if(!i.ok){const P=await i.json();throw new Error(P.error||"Impersonation failed")}const a=await i.json(),l={id:a.user.id,username:a.user.username,email:a.user.email,role:a.user.role,credits:a.user.credits||0,emailVerified:a.user.emailVerified},y={isImpersonating:!0,originalAdmin:a.originalAdmin};localStorage.setItem("auth_token",a.token),localStorage.setItem("current_user",JSON.stringify(l)),localStorage.setItem("impersonation_state",JSON.stringify(y)),t({isAuthenticated:!0,user:l,token:a.token,isImpersonating:!0,originalAdmin:a.originalAdmin}),v.configure({isAdmin:!0}),v.info(`Now impersonating ${l.username}`)},[r.token]),j=o.useCallback(async()=>{const f=await fetch(`${x}/api/admin/stop-impersonate`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r.token}`}});if(!f.ok){const l=await f.json();throw new Error(l.error||"Failed to stop impersonation")}const i=await f.json(),a={id:i.user.id,username:i.user.username,email:i.user.email,role:i.user.role,credits:i.user.credits||0,emailVerified:i.user.emailVerified};localStorage.setItem("auth_token",i.token),localStorage.setItem("current_user",JSON.stringify(a)),localStorage.removeItem("impersonation_state"),t({isAuthenticated:!0,user:a,token:i.token,isImpersonating:!1,originalAdmin:null}),v.configure({isAdmin:!0}),v.info(`Stopped impersonating, back to ${a.username}`)},[r.token]);o.useEffect(()=>{(async()=>{if(!u.current){u.current=!0;try{v.info("Checking for Google redirect result...");const i=await je();if(i){if(h.current){v.info("Redirect result: Auth already in progress, skipping");return}h.current=!0,v.info("Redirect result: Firebase user detected, completing login..."),await g(i),h.current=!1;const a=sessionStorage.getItem("auth_redirect_after_login");a&&(sessionStorage.removeItem("auth_redirect_after_login"),v.info("Redirect result: Navigating to stored redirect URL:",a),window.location.href=a)}else v.info("Redirect result: No pending redirect")}catch(i){h.current=!1,console.error("Redirect result error:",i)}}})()},[g]),o.useEffect(()=>{const f=Ne(async i=>{if(i&&!r.isAuthenticated&&!r.token&&!h.current){h.current=!0,v.info("Firebase auth state changed: User detected, completing login...");try{await g(i)}catch(a){console.error("Firebase auth state change error:",a)}h.current=!1}});return()=>f()},[r.isAuthenticated,r.token,g]);const ie=o.useCallback(f=>{t(i=>{if(!i.user)return i;const a={...i.user,credits:f};return localStorage.setItem("current_user",JSON.stringify(a)),{...i,user:a}})},[]),le=o.useCallback(async()=>{const f=localStorage.getItem("auth_token");if(f)try{const i=await fetch(`${x}/api/auth/me`,{headers:{Authorization:`Bearer ${f}`}});if(!i.ok)return;const a=await i.json(),l={id:a.user.id,username:a.user.username,email:a.user.email,role:a.user.role,credits:a.user.credits,preferredLanguage:a.user.preferredLanguage,emailVerified:a.user.emailVerified};localStorage.setItem("current_user",JSON.stringify(l)),t(y=>({...y,user:l}))}catch(i){v.error("Failed to refresh user:",i)}},[]);return n.jsx(re.Provider,{value:{...r,login:c,register:d,loginWithGoogle:m,resetPassword:A,changePassword:S,logout:b,updateCredits:ie,refreshUser:le,impersonate:k,stopImpersonating:j,isLoading:p},children:e})}function Be(){const e=o.useContext(re);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e}const Ve={en:{title:"Magical Story",subtitle:"Personalize your story to create magic",heroTitle:"Become the hero of your story",heroSubtitle:"",heroDescription:"Turn your wildest ideas into a breathtaking personalized tale.",bookText:"Get a beautifully printed book and make someone feel like the legend they truly are.",startJourney:"Start Your Adventure",selectLanguage:"Choose your language",login:"Login",register:"Register",logout:"Logout",username:"Username",password:"Password",email:"Email (optional)",welcomeBack:"Welcome Back!",createAccount:"Create Account",noAccount:"Don't have an account?",haveAccount:"Already have an account?",signUp:"Sign up",signIn:"Sign in",loginRequired:"Please login to continue",continueWithGoogle:"Continue with Google",continueWithApple:"Continue with Apple",orContinueWith:"or continue with",forgotPassword:"Forgot password?",resetPassword:"Reset Password",resetPasswordDesc:"Enter your email and we'll send you a reset link",sendResetLink:"Send Reset Link",resetLinkSent:"Password reset email sent! Check your inbox.",backToLogin:"Back to login",chooseStoryType:"Choose Your Story Type",chooseArtStyle:"Choose Your Art Style",artStyleDescription:"Select the visual style for your story",addCustomStoryType:"Add Custom Story Type",storyTypeName:"Story Type Name",storyTypeEmoji:"Emoji",addStoryType:"Add",createCharacters:"Create Your Characters",characterCreated:"Character Created!",createAnother:"Create Another Character",continueToRelationships:"Continue to Relationships",yourCharacters:"Your Characters:",startCreating:"Start Creating Character",characterName:"Character Name",characterPhoto:"Character Photo",uploadPhoto:"Upload Photo",uploadPhotoFirst:"Please upload a photo to continue",photoGoodExamples:"Good: Full body or upper body",photoBadExamples:"Avoid: Close-up face only, sunglasses, hats, helmets, blurry",orDescribe:"OR describe the character",characterAge:"Age",hairColor:"Hair Color",otherFeatures:"Other Features",descriptionPlaceholder:"e.g., Blue eyes, wears glasses, has freckles",gender:"Gender",male:"Male",female:"Female",other:"Unknown",age:"Age",strengths:"Strengths",weaknesses:"Weaknesses",selectAtLeast:"Select at least",selected:"Selected",addCustomStrengths:"Add custom strengths",addCustomWeaknesses:"Add custom weaknesses",addCustomFears:"Add custom fears",specialDetails:"Hobbies, Interests, Favourite Cuddly Toy, Job and Other Details",specialDetailsPlaceholder:"e.g., Enjoys painting, loves dinosaurs, favourite teddy bear called Bruno, wants to be a firefighter",fears:"Fears",addCustomRelationship:"Add custom relationship",cancel:"Cancel",saveCharacter:"Save Character",editCharacter:"Edit",deleteCharacter:"Delete",defineRelationships:"Define Character Relationships",defineRelationshipsDesc:"Define how each character relates to the others.",is:"is",reverseRelationship:"Reverse relationship:",storySettings:"Story Settings",selectMainCharacters:"Select Main Characters (max 2)",numberOfPages:"Number of Pages",readingLevel:"Reading Level",firstGrade:"Picture Book",firstGradeDesc:"Image and text on both pages",standard:"Standard",standardDesc:"Text on one page, image on the other",advanced:"Advanced",advancedDesc:"Longer text, image on opposite page",generateStory:"Generate Story!",creating:"Creating Your Story...",storyReady:"Your Story is Ready!",downloadTXT:"Download as TXT",downloadPDF:"Download as PDF",downloadPrompt:"Download Prompt",viewPrompt:"View Prompt",hidePrompt:"Hide Prompt",promptUsed:"Prompt Used to Generate Story:",createAnotherStory:"Create Another Story",back:"Back",next:"Next",exportConfig:"Export Configuration",exportStoryInfo:"Export Story Info (MD)",importConfig:"Import Configuration",charactersCreated:"You've created {count} character{s} so far.",mainCharacter:"Main Character",apiKeyRequired:"API Key Required",apiKeyPrompt:"Please enter your Anthropic API key to generate stories:",apiKeyPlaceholder:"sk-ant-...",saveApiKey:"Save API Key",apiKeyNote:"Your API key is stored locally in your browser and never sent anywhere except to Anthropic.",promptPreview:"Prompt Preview",showPromptPreview:"Show Prompt",hidePromptPreview:"Hide Prompt",editPrompt:"Edit Prompt",resetPrompt:"Reset to Default",storyDetails:"Story Plot / Story Details",storyDetailsOptional:"(optional)",storyDetailsPlaceholder:"e.g., Location: Enchanted forest, Special elements: Magical talking animals, Time period: Medieval times...",generateOutline:"Generate Outline",generatingOutline:"Generating Outline...",outlineReady:"Story Outline",editOutline:"You can edit the outline below before generating the full story:",regenerateOutline:"Regenerate Outline",createScenes:"Create Scene Descriptions",creatingScenes:"Creating Scene Descriptions...",scenesReady:"Scene Descriptions",downloadScenes:"Download Scenes",sceneForPage:"Scene for Page",yourStory:"Your Story",uploadStory:"Upload Story",uploadStoryDesc:"Upload an existing story text file to generate scene descriptions",generateImages:"Generate Scene Images",generatingImages:"Generating Images...",imagesReady:"Scene Images",downloadImage:"Download Image",geminiApiKey:"Gemini API Key",geminiApiKeyPrompt:"Enter your Google Gemini API key to generate images:",geminiApiKeyNote:"Get your key from Google AI Studio",imageForPage:"Image for Page",generateAvatar:"Generate Pixar Avatar",generatingAvatar:"Generating Avatar...",avatarGenerated:"Avatar Generated!",useGeneratedAvatar:"Use Generated Avatar",keepOriginal:"Keep Original Photo",uploadType:"What are you uploading?",uploadRealPhoto:"Real Photo (will generate avatar)",uploadReadyAvatar:"Ready Avatar (already stylized)",editStory:"Edit Story",saveStory:"Save Story",editScene:"Edit Scene",saveScene:"Save Scene",editImage:"Edit Image",regenerateImage:"Regenerate Image",showEditPrompt:"Show Prompt",hideEditPrompt:"Hide Prompt",editInstruction:"What should be changed?",applyEdit:"Apply Edit"},de:{title:"Magical Story",subtitle:"Personalisiere deine Geschichte fÃ¼r Magie",heroTitle:"Werde zum Helden deiner Geschichte",heroSubtitle:"",heroDescription:"Verwandle deine wildesten Ideen in eine atemberaubende personalisierte Geschichte.",bookText:"Erhalte ein wunderschÃ¶n gedrucktes Buch und gib jemandem das GefÃ¼hl, die Legende zu sein, die er wirklich ist.",startJourney:"Starte dein Abenteuer",selectLanguage:"WÃ¤hle deine Sprache",login:"Anmelden",register:"Registrieren",logout:"Abmelden",username:"Benutzername",password:"Passwort",email:"E-Mail (optional)",welcomeBack:"Willkommen zurÃ¼ck!",createAccount:"Konto erstellen",noAccount:"Noch kein Konto?",haveAccount:"Bereits ein Konto?",signUp:"Registrieren",signIn:"Anmelden",loginRequired:"Bitte melde dich an, um fortzufahren",continueWithGoogle:"Mit Google fortfahren",continueWithApple:"Mit Apple fortfahren",orContinueWith:"oder fortfahren mit",forgotPassword:"Passwort vergessen?",resetPassword:"Passwort zurÃ¼cksetzen",resetPasswordDesc:"Gib deine E-Mail ein und wir senden dir einen Link zum ZurÃ¼cksetzen",sendResetLink:"Link senden",resetLinkSent:"E-Mail zum ZurÃ¼cksetzen gesendet! ÃœberprÃ¼fe deinen Posteingang.",backToLogin:"ZurÃ¼ck zur Anmeldung",chooseStoryType:"WÃ¤hle deinen Geschichtentyp",chooseArtStyle:"WÃ¤hle deinen Kunststil",artStyleDescription:"WÃ¤hle den visuellen Stil fÃ¼r deine Geschichte",addCustomStoryType:"Eigenen Geschichtentyp hinzufÃ¼gen",storyTypeName:"Name des Geschichtentyps",storyTypeEmoji:"Emoji",addStoryType:"HinzufÃ¼gen",createCharacters:"Erstelle deine Charaktere",characterCreated:"Charakter erstellt!",createAnother:"Weiteren Charakter erstellen",continueToRelationships:"Weiter zu Beziehungen",yourCharacters:"Deine Charaktere:",startCreating:"Charakter erstellen beginnen",characterName:"Charaktername",characterPhoto:"Charakterfoto",uploadPhoto:"Foto hochladen",uploadPhotoFirst:"Bitte laden Sie ein Foto hoch, um fortzufahren",photoGoodExamples:"Gut: GanzkÃ¶rper oder OberkÃ¶rper",photoBadExamples:"Vermeiden: Nur Gesicht, Sonnenbrille, HÃ¼te, Helme, unscharf",orDescribe:"ODER Figur beschreiben",characterAge:"Alter",hairColor:"Haarfarbe",otherFeatures:"Sonstige Merkmale",descriptionPlaceholder:"z.B. Blaue Augen, trÃ¤gt Brille, hat Sommersprossen",gender:"Geschlecht",male:"MÃ¤nnlich",female:"Weiblich",other:"Unbekannt",age:"Alter",strengths:"StÃ¤rken",weaknesses:"SchwÃ¤chen",selectAtLeast:"WÃ¤hle mindestens",selected:"AusgewÃ¤hlt",addCustomStrengths:"Eigene StÃ¤rken hinzufÃ¼gen",addCustomWeaknesses:"Eigene SchwÃ¤chen hinzufÃ¼gen",addCustomFears:"Eigene Ã„ngste hinzufÃ¼gen",specialDetails:"Hobbys, Interessen, Lieblingskuscheltier, Beruf und andere Besonderheiten",specialDetailsPlaceholder:"z.B. Malt gerne, liebt Dinosaurier, Lieblingsteddy heisst Bruno, will Feuerwehrmann werden",fears:"Ã„ngste",addCustomRelationship:"Eigene Beziehung hinzufÃ¼gen",cancel:"Abbrechen",saveCharacter:"Charakter speichern",editCharacter:"Bearbeiten",deleteCharacter:"LÃ¶schen",defineRelationships:"Charakterbeziehungen definieren",defineRelationshipsDesc:"Definiere, wie die Charaktere zueinander stehen.",is:"ist",reverseRelationship:"Umgekehrte Beziehung:",storySettings:"Geschichten-Einstellungen",selectMainCharacters:"Hauptfiguren auswÃ¤hlen (max 2)",numberOfPages:"Anzahl der Seiten",readingLevel:"Lesestufe",firstGrade:"Bilderbuch",firstGradeDesc:"Bild und Text auf beiden Seiten",standard:"Standard",standardDesc:"Text auf einer Seite, Bild auf der anderen",advanced:"Fortgeschritten",advancedDesc:"LÃ¤ngerer Text, Bild auf der gegenÃ¼berliegenden Seite",generateStory:"Geschichte erstellen!",creating:"Erstelle deine Geschichte...",storyReady:"Deine Geschichte ist fertig!",downloadTXT:"Als TXT herunterladen",downloadPDF:"Als PDF herunterladen",downloadPrompt:"Prompt herunterladen",viewPrompt:"Prompt anzeigen",hidePrompt:"Prompt ausblenden",promptUsed:"Verwendeter Prompt:",createAnotherStory:"Neue Geschichte erstellen",back:"ZurÃ¼ck",next:"Weiter",exportConfig:"Konfiguration exportieren",exportStoryInfo:"Story-Info exportieren (MD)",importConfig:"Konfiguration importieren",charactersCreated:"Du hast bisher {count} Charakter{s} erstellt.",mainCharacter:"Hauptfigur",apiKeyRequired:"API-SchlÃ¼ssel erforderlich",apiKeyPrompt:"Bitte geben Sie Ihren Anthropic API-SchlÃ¼ssel ein:",apiKeyPlaceholder:"sk-ant-...",saveApiKey:"API-SchlÃ¼ssel speichern",apiKeyNote:"Ihr API-SchlÃ¼ssel wird lokal im Browser gespeichert.",promptPreview:"Prompt-Vorschau",showPromptPreview:"Prompt anzeigen",hidePromptPreview:"Prompt ausblenden",editPrompt:"Prompt bearbeiten",resetPrompt:"Auf Standard zurÃ¼cksetzen",storyDetails:"Handlung / Angaben zur Geschichte",storyDetailsOptional:"(optional)",storyDetailsPlaceholder:"z.B. Ort: Verzauberter Wald, Besondere Elemente: Magische sprechende Tiere, Zeitperiode: Mittelalter...",generateOutline:"Gliederung erstellen",generatingOutline:"Gliederung wird erstellt...",outlineReady:"Story-Gliederung",editOutline:"Sie kÃ¶nnen die Gliederung unten bearbeiten, bevor Sie die vollstÃ¤ndige Geschichte erstellen:",regenerateOutline:"Gliederung neu erstellen",createScenes:"Szenen-Beschreibungen erstellen",creatingScenes:"Szenen-Beschreibungen werden erstellt...",scenesReady:"Szenen-Beschreibungen",downloadScenes:"Szenen herunterladen",sceneForPage:"Szene fÃ¼r Seite",yourStory:"Deine Geschichte",uploadStory:"Geschichte hochladen",uploadStoryDesc:"Laden Sie eine vorhandene Story-Textdatei hoch, um Szenenbeschreibungen zu generieren",generateImages:"Szenenbilder generieren",generatingImages:"Bilder werden generiert...",imagesReady:"Szenenbilder",downloadImage:"Bild herunterladen",geminiApiKey:"Gemini API-SchlÃ¼ssel",geminiApiKeyPrompt:"Geben Sie Ihren Google Gemini API-SchlÃ¼ssel ein:",geminiApiKeyNote:"Holen Sie sich Ihren SchlÃ¼ssel von Google AI Studio",imageForPage:"Bild fÃ¼r Seite",generateAvatar:"Pixar-Avatar erstellen",generatingAvatar:"Avatar wird erstellt...",avatarGenerated:"Avatar erstellt!",useGeneratedAvatar:"Generierten Avatar verwenden",keepOriginal:"Originalfoto behalten",uploadType:"Was laden Sie hoch?",uploadRealPhoto:"Echtes Foto (Avatar wird generiert)",uploadReadyAvatar:"Fertiger Avatar (bereits stilisiert)",editStory:"Geschichte bearbeiten",saveStory:"Geschichte speichern",editScene:"Szene bearbeiten",saveScene:"Szene speichern",editImage:"Bild bearbeiten",regenerateImage:"Bild neu generieren",showEditPrompt:"Prompt anzeigen",hideEditPrompt:"Prompt ausblenden",editInstruction:"Was soll geÃ¤ndert werden?",applyEdit:"Ã„nderung anwenden"},fr:{title:"Magical Story",subtitle:"Personnalisez votre histoire pour crÃ©er la magie",heroTitle:"Devenez le hÃ©ros de votre histoire",heroSubtitle:"",heroDescription:"Transformez vos idÃ©es les plus folles en un conte personnalisÃ© Ã©poustouflant.",bookText:"Obtenez un livre magnifiquement imprimÃ© et donnez Ã  quelqu'un le sentiment d'Ãªtre la lÃ©gende qu'il est vraiment.",startJourney:"Commencez Votre Aventure",selectLanguage:"Choisissez votre langue",login:"Connexion",register:"S'inscrire",logout:"DÃ©connexion",username:"Nom d'utilisateur",password:"Mot de passe",email:"Email (facultatif)",welcomeBack:"Bon retour !",createAccount:"CrÃ©er un compte",noAccount:"Pas encore de compte ?",haveAccount:"Vous avez dÃ©jÃ  un compte ?",signUp:"S'inscrire",signIn:"Se connecter",loginRequired:"Veuillez vous connecter pour continuer",continueWithGoogle:"Continuer avec Google",continueWithApple:"Continuer avec Apple",orContinueWith:"ou continuer avec",forgotPassword:"Mot de passe oubliÃ© ?",resetPassword:"RÃ©initialiser le mot de passe",resetPasswordDesc:"Entrez votre e-mail et nous vous enverrons un lien de rÃ©initialisation",sendResetLink:"Envoyer le lien",resetLinkSent:"E-mail de rÃ©initialisation envoyÃ© ! VÃ©rifiez votre boÃ®te de rÃ©ception.",backToLogin:"Retour Ã  la connexion",chooseStoryType:"Choisissez Votre Type d'Histoire",chooseArtStyle:"Choisissez Votre Style Artistique",artStyleDescription:"SÃ©lectionnez le style visuel pour votre histoire",addCustomStoryType:"Ajouter un Type d'Histoire PersonnalisÃ©",storyTypeName:"Nom du Type d'Histoire",storyTypeEmoji:"Emoji",addStoryType:"Ajouter",createCharacters:"CrÃ©ez Vos Personnages",characterCreated:"Personnage CrÃ©Ã© !",createAnother:"CrÃ©er un Autre Personnage",continueToRelationships:"Continuer vers les Relations",yourCharacters:"Vos Personnages :",startCreating:"Commencer Ã  CrÃ©er un Personnage",characterName:"Nom du Personnage",characterPhoto:"Photo du Personnage",uploadPhoto:"TÃ©lÃ©charger une Photo",uploadPhotoFirst:"Veuillez tÃ©lÃ©charger une photo pour continuer",photoGoodExamples:"Bien : Corps entier ou buste",photoBadExamples:"Ã‰viter : Gros plan visage, lunettes de soleil, chapeaux, casques, flou",orDescribe:"OU dÃ©crivez le personnage",characterAge:"Ã‚ge",hairColor:"Couleur des Cheveux",otherFeatures:"Autres CaractÃ©ristiques",descriptionPlaceholder:"ex. Yeux bleus, porte des lunettes, a des taches de rousseur",gender:"Genre",male:"Masculin",female:"FÃ©minin",other:"Inconnu",age:"Ã‚ge",strengths:"Forces",weaknesses:"Faiblesses",selectAtLeast:"SÃ©lectionnez au moins",selected:"SÃ©lectionnÃ©",addCustomStrengths:"Ajouter des forces personnalisÃ©es",addCustomWeaknesses:"Ajouter des faiblesses personnalisÃ©es",addCustomFears:"Ajouter des peurs personnalisÃ©es",specialDetails:"Loisirs, IntÃ©rÃªts, Peluche PrÃ©fÃ©rÃ©e, MÃ©tier et Autres DÃ©tails",specialDetailsPlaceholder:"ex. Aime peindre, adore les dinosaures, son nounours prÃ©fÃ©rÃ© s'appelle Bruno, veut devenir pompier",fears:"Peurs",addCustomRelationship:"Ajouter une relation personnalisÃ©e",cancel:"Annuler",saveCharacter:"Enregistrer le Personnage",editCharacter:"Modifier",deleteCharacter:"Supprimer",defineRelationships:"DÃ©finir les Relations entre Personnages",defineRelationshipsDesc:"DÃ©finissez comment chaque personnage est liÃ© aux autres.",is:"est",reverseRelationship:"Relation inverse :",storySettings:"ParamÃ¨tres de l'Histoire",selectMainCharacters:"SÃ©lectionner les Personnages Principaux (max 2)",numberOfPages:"Nombre de Pages",readingLevel:"Niveau de Lecture",firstGrade:"Livre d'Images",firstGradeDesc:"Image et texte sur les deux pages",standard:"Standard",standardDesc:"Texte sur une page, image sur l'autre",advanced:"AvancÃ©",advancedDesc:"Texte plus long, image sur la page opposÃ©e",generateStory:"GÃ©nÃ©rer l'Histoire !",creating:"CrÃ©ation de Votre Histoire...",storyReady:"Votre Histoire est PrÃªte !",downloadTXT:"TÃ©lÃ©charger en TXT",downloadPDF:"TÃ©lÃ©charger en PDF",downloadPrompt:"TÃ©lÃ©charger le Prompt",viewPrompt:"Voir le Prompt",hidePrompt:"Masquer le Prompt",promptUsed:"Prompt UtilisÃ© pour GÃ©nÃ©rer l'Histoire :",createAnotherStory:"CrÃ©er une Autre Histoire",back:"Retour",next:"Suivant",exportConfig:"Exporter la Configuration",exportStoryInfo:"Exporter les Infos (MD)",importConfig:"Importer la Configuration",charactersCreated:"Vous avez crÃ©Ã© {count} personnage{s} jusqu'Ã  prÃ©sent.",mainCharacter:"Personnage Principal",apiKeyRequired:"ClÃ© API Requise",apiKeyPrompt:"Veuillez entrer votre clÃ© API Anthropic pour gÃ©nÃ©rer des histoires :",apiKeyPlaceholder:"sk-ant-...",saveApiKey:"Enregistrer la ClÃ© API",apiKeyNote:"Votre clÃ© API est stockÃ©e localement dans votre navigateur.",promptPreview:"AperÃ§u du Prompt",showPromptPreview:"Afficher le Prompt",hidePromptPreview:"Masquer le Prompt",editPrompt:"Modifier le Prompt",resetPrompt:"RÃ©initialiser par DÃ©faut",storyDetails:"Intrigue / Contexte du rÃ©cit",storyDetailsOptional:"(facultatif)",storyDetailsPlaceholder:"ex. Lieu : ForÃªt enchantÃ©e, Ã‰lÃ©ments spÃ©ciaux : Animaux magiques parlants, PÃ©riode : Moyen Ã‚ge...",generateOutline:"GÃ©nÃ©rer le Plan",generatingOutline:"GÃ©nÃ©ration du Plan...",outlineReady:"Plan de l'Histoire",editOutline:"Vous pouvez modifier le plan ci-dessous avant de gÃ©nÃ©rer l'histoire complÃ¨te :",regenerateOutline:"RegÃ©nÃ©rer le Plan",createScenes:"CrÃ©er les Descriptions de ScÃ¨nes",creatingScenes:"CrÃ©ation des Descriptions de ScÃ¨nes...",scenesReady:"Descriptions de ScÃ¨nes",downloadScenes:"TÃ©lÃ©charger les ScÃ¨nes",sceneForPage:"ScÃ¨ne pour la Page",yourStory:"Votre Histoire",uploadStory:"TÃ©lÃ©charger une Histoire",uploadStoryDesc:"TÃ©lÃ©chargez un fichier texte existant pour gÃ©nÃ©rer des descriptions de scÃ¨nes",generateImages:"GÃ©nÃ©rer les Images de ScÃ¨nes",generatingImages:"GÃ©nÃ©ration des Images...",imagesReady:"Images de ScÃ¨nes",downloadImage:"TÃ©lÃ©charger l'Image",geminiApiKey:"ClÃ© API Gemini",geminiApiKeyPrompt:"Entrez votre clÃ© API Google Gemini pour gÃ©nÃ©rer des images :",geminiApiKeyNote:"Obtenez votre clÃ© sur Google AI Studio",imageForPage:"Image pour la Page",generateAvatar:"GÃ©nÃ©rer un Avatar Pixar",generatingAvatar:"GÃ©nÃ©ration de l'Avatar...",avatarGenerated:"Avatar GÃ©nÃ©rÃ© !",useGeneratedAvatar:"Utiliser l'Avatar GÃ©nÃ©rÃ©",keepOriginal:"Garder la Photo Originale",uploadType:"Que tÃ©lÃ©chargez-vous ?",uploadRealPhoto:"Photo rÃ©elle (avatar sera gÃ©nÃ©rÃ©)",uploadReadyAvatar:"Avatar prÃªt (dÃ©jÃ  stylisÃ©)",editStory:"Modifier l'Histoire",saveStory:"Enregistrer l'Histoire",editScene:"Modifier la ScÃ¨ne",saveScene:"Enregistrer la ScÃ¨ne",editImage:"Modifier l'Image",regenerateImage:"RegÃ©nÃ©rer l'Image",showEditPrompt:"Afficher le Prompt",hideEditPrompt:"Masquer le Prompt",editInstruction:"Que faut-il changer ?",applyEdit:"Appliquer la Modification"}},te=o.createContext(null),G="magicalstory_language";function Fe(){const e=navigator.language.toLowerCase();return e.startsWith("de")?"de":e.startsWith("fr")?"fr":"en"}function Me({children:e}){const[r,t]=o.useState(()=>{const u=localStorage.getItem(G);return u&&["en","de","fr"].includes(u)?u:Fe()});o.useEffect(()=>{localStorage.setItem(G,r),document.documentElement.lang=r},[r]),o.useEffect(()=>{const u=c=>{c.key===G&&c.newValue&&["en","de","fr"].includes(c.newValue)&&t(c.newValue)},h=()=>{const c=localStorage.getItem(G);c&&["en","de","fr"].includes(c)&&c!==r&&t(c)};return window.addEventListener("storage",u),window.addEventListener("languageUpdated",h),()=>{window.removeEventListener("storage",u),window.removeEventListener("languageUpdated",h)}},[r]);const p=u=>{t(u)},s=Ve[r];return n.jsx(te.Provider,{value:{language:r,setLanguage:p,t:s},children:e})}function We(){const e=o.useContext(te);if(!e)throw new Error("useTranslation must be used within a LanguageProvider");return e}const Ue=We;/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ne=(...e)=>e.filter((r,t,p)=>!!r&&r.trim()!==""&&p.indexOf(r)===t).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var He={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=o.forwardRef(({color:e="currentColor",size:r=24,strokeWidth:t=2,absoluteStrokeWidth:p,className:s="",children:u,iconNode:h,...c},d)=>o.createElement("svg",{ref:d,...He,width:r,height:r,stroke:e,strokeWidth:p?Number(t)*24/Number(r):t,className:ne("lucide",s),...c},[...h.map(([g,m])=>o.createElement(g,m)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=(e,r)=>{const t=o.forwardRef(({className:p,...s},u)=>o.createElement(Ke,{ref:u,iconNode:r,className:ne(`lucide-${qe(e)}`,p),...s}));return t.displayName=`${e}`,t};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=R("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=R("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=R("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=R("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=R("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=R("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=R("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),M={en:{viewingAs:"Viewing as",stopViewing:"Stop viewing",stopping:"Stopping..."},de:{viewingAs:"Ansicht als",stopViewing:"Ansicht beenden",stopping:"Beenden..."},fr:{viewingAs:"Vue en tant que",stopViewing:"Arreter la vue",stopping:"ArrÃªt..."}};function rr(){const e=de(),{isImpersonating:r,user:t,originalAdmin:p,stopImpersonating:s}=Be(),{language:u}=Ue(),[h,c]=o.useState(!1),[d,g]=o.useState(null),m=M[u]||M.en;if(!r||!t||!p)return null;const A=async()=>{c(!0),g(null);try{await s(),e("/admin")}catch(S){console.error("Failed to stop impersonating:",S),g(S instanceof Error?S.message:"Failed to stop"),c(!1)}};return n.jsxs("div",{className:"bg-amber-500 text-black py-2 px-4 flex items-center justify-center gap-4 text-sm font-medium sticky top-0 z-50",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Xe,{size:16}),n.jsxs("span",{children:[m.viewingAs,": ",n.jsx("strong",{children:t.username})," (",t.email,")"]})]}),d&&n.jsx("span",{className:"text-red-800 bg-red-200 px-2 py-0.5 rounded text-xs",children:d}),n.jsxs("button",{onClick:A,disabled:h,className:"flex items-center gap-1 bg-black/20 hover:bg-black/30 disabled:opacity-50 px-3 py-1 rounded-full transition-colors",children:[h?n.jsx(Qe,{size:14,className:"animate-spin"}):n.jsx(oe,{size:14}),n.jsx("span",{children:h?m.stopping:m.stopViewing})]})]})}const tr=o.lazy(()=>E(()=>import("./LandingPage-DEu3Xazv.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),nr=o.lazy(()=>E(()=>import("./StoryWizard-Cegusrzp.js"),__vite__mapDeps([7,1,2,3,8,9,10,11,5,12,13,14,15,4,6]))),or=o.lazy(()=>E(()=>import("./MyStories-BIBZTGQM.js"),__vite__mapDeps([16,1,15,11,3,2,17,9,10,6]))),ar=o.lazy(()=>E(()=>import("./MyOrders-BnAkQQXO.js"),__vite__mapDeps([18,1,3,2,11,13,6]))),sr=o.lazy(()=>E(()=>import("./AdminDashboard-BU-KfNIu.js"),__vite__mapDeps([19,1,11,2,9,8,20,10,13,6]))),ir=o.lazy(()=>E(()=>import("./Pricing-CGdOOFxS.js").then(e=>e.P),__vite__mapDeps([17,1,3,2,9]))),lr=o.lazy(()=>E(()=>import("./BookBuilder-DyvQWj8T.js"),__vite__mapDeps([21,1,3,2,15,11,17,9,14,20,6]))),cr=o.lazy(()=>E(()=>import("./ResetPassword-4ZyUDQap.js"),__vite__mapDeps([22,1,2,3,12,6]))),ur=o.lazy(()=>E(()=>import("./EmailVerified-BktBU3zi.js"),__vite__mapDeps([23,1,2,3,4,6])));function dr(){return n.jsxs(n.Fragment,{children:[n.jsx(rr,{}),n.jsx(o.Suspense,{fallback:n.jsx(Ie,{fullScreen:!0}),children:n.jsxs(ge,{children:[n.jsx(C,{path:"/",element:n.jsx(tr,{})}),n.jsx(C,{path:"/create/*",element:n.jsx(nr,{})}),n.jsx(C,{path:"/stories",element:n.jsx(or,{})}),n.jsx(C,{path:"/orders",element:n.jsx(ar,{})}),n.jsx(C,{path:"/pricing",element:n.jsx(ir,{})}),n.jsx(C,{path:"/book-builder",element:n.jsx(lr,{})}),n.jsx(C,{path:"/admin",element:n.jsx(sr,{})}),n.jsx(C,{path:"/reset-password/:token",element:n.jsx(cr,{})}),n.jsx(C,{path:"/email-verified",element:n.jsx(ur,{})})]})})]})}const ae={storyType:"",artStyle:"",storyDetails:"",characters:[],currentCharacterId:null,relationships:{},relationshipTexts:{},pages:30,languageLevel:"standard",mainCharacters:[],dedication:"",storyOutline:"",generatedStory:"",storyTitle:"",sceneDescriptions:[],sceneImages:[],coverImages:{frontCover:null,initialPage:null,backCover:null},isGenerating:!1,generationProgress:null,currentStoryId:null,currentStep:0};function gr(e,r){switch(r.type){case"SET_STORY_TYPE":return{...e,storyType:r.payload};case"SET_ART_STYLE":return{...e,artStyle:r.payload};case"SET_STORY_DETAILS":return{...e,storyDetails:r.payload};case"ADD_CHARACTER":return{...e,characters:[...e.characters,r.payload]};case"UPDATE_CHARACTER":return{...e,characters:e.characters.map(t=>t.id===r.payload.id?r.payload:t)};case"DELETE_CHARACTER":return{...e,characters:e.characters.filter(t=>t.id!==r.payload),mainCharacters:e.mainCharacters.filter(t=>t!==r.payload)};case"SET_CURRENT_CHARACTER":return{...e,currentCharacterId:r.payload};case"SET_CHARACTERS":return{...e,characters:r.payload};case"SET_RELATIONSHIP":return{...e,relationships:{...e.relationships,[r.payload.key]:r.payload.value}};case"SET_RELATIONSHIP_TEXT":return{...e,relationshipTexts:{...e.relationshipTexts,[r.payload.key]:r.payload.value}};case"SET_RELATIONSHIPS":return{...e,relationships:r.payload};case"SET_PAGES":return{...e,pages:r.payload};case"SET_LANGUAGE_LEVEL":return{...e,languageLevel:r.payload};case"SET_MAIN_CHARACTERS":return{...e,mainCharacters:r.payload};case"SET_DEDICATION":return{...e,dedication:r.payload};case"SET_OUTLINE":return{...e,storyOutline:r.payload};case"SET_GENERATED_STORY":return{...e,generatedStory:r.payload.story,storyTitle:r.payload.title};case"SET_SCENE_DESCRIPTIONS":return{...e,sceneDescriptions:r.payload};case"SET_SCENE_IMAGE":return{...e,sceneImages:[...e.sceneImages.filter(t=>t.pageNumber!==r.payload.pageNumber),r.payload].sort((t,p)=>t.pageNumber-p.pageNumber)};case"SET_COVER_IMAGES":return{...e,coverImages:{...e.coverImages,...r.payload}};case"SET_GENERATING":return{...e,isGenerating:r.payload};case"SET_GENERATION_PROGRESS":return{...e,generationProgress:r.payload};case"SET_CURRENT_STORY_ID":return{...e,currentStoryId:r.payload};case"SET_STEP":return{...e,currentStep:r.payload};case"LOAD_STORY":return{...e,...r.payload};case"RESET_STORY":return{...ae};default:return e}}const pr=o.createContext(null);function hr({children:e}){const[r,t]=o.useReducer(gr,ae);return n.jsx(pr.Provider,{value:{state:r,dispatch:t},children:e})}const mr={success:{bg:"bg-green-600",border:"border-green-700",icon:Ye},error:{bg:"bg-red-600",border:"border-red-700",icon:Je},info:{bg:"bg-blue-600",border:"border-blue-700",icon:Ze},warning:{bg:"bg-yellow-500",border:"border-yellow-600",icon:er}};function fr({id:e,message:r,title:t,variant:p="info",duration:s=8e3,onClose:u,details:h}){const[c,d]=o.useState(!1),[g,m]=o.useState(!1),A=mr[p],S=A.icon;o.useEffect(()=>{if(requestAnimationFrame(()=>d(!0)),s>0){const k=setTimeout(()=>{b()},s);return()=>clearTimeout(k)}},[s]);const b=()=>{m(!0),setTimeout(()=>u(e),300)};return n.jsxs("div",{className:`
        transform transition-all duration-300 ease-out
        ${c&&!g?"translate-x-0 opacity-100":"translate-x-full opacity-0"}
        ${A.bg} ${A.border}
        text-white rounded-lg shadow-2xl border
        max-w-md w-full pointer-events-auto
        overflow-hidden
      `,children:[n.jsx("div",{className:"p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(S,{className:"shrink-0 mt-0.5",size:24}),n.jsxs("div",{className:"flex-1 min-w-0",children:[t&&n.jsx("p",{className:"font-bold text-lg mb-1",children:t}),n.jsx("p",{className:"text-sm opacity-95",children:r}),h&&h.length>0&&n.jsx("div",{className:"mt-3 pt-3 border-t border-white/20 space-y-1",children:h.map((k,j)=>n.jsx("p",{className:"text-xs opacity-80",children:k},j))})]}),n.jsx("button",{onClick:b,className:"shrink-0 p-1 rounded hover:bg-white/20 transition-colors","aria-label":"Dismiss",children:n.jsx(oe,{size:18})})]})}),s>0&&n.jsx("div",{className:"h-1 bg-white/20",children:n.jsx("div",{className:"h-full bg-white/40 transition-all ease-linear",style:{width:"100%",animation:`shrink ${s}ms linear forwards`}})}),n.jsx("style",{children:`
        @keyframes shrink {
          from { width: 100%; }
          to { width: 0%; }
        }
      `})]})}const se=o.createContext(void 0);function yr({children:e}){const[r,t]=o.useState([]),p=o.useCallback(d=>{t(g=>g.filter(m=>m.id!==d))},[]),s=o.useCallback(d=>{const g=`toast-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;t(m=>[...m,{...d,id:g}])},[]),u=o.useCallback((d,g,m)=>{s({message:d,title:g,variant:"success",duration:1e4,details:m})},[s]),h=o.useCallback((d,g)=>{s({message:d,title:g,variant:"error",duration:8e3})},[s]),c=o.useCallback((d,g)=>{s({message:d,title:g,variant:"info",duration:6e3})},[s]);return n.jsxs(se.Provider,{value:{showToast:s,showSuccess:u,showError:h,showInfo:c,removeToast:p},children:[e,n.jsx("div",{className:"fixed top-4 right-4 z-[100] flex flex-col gap-3 pointer-events-none",children:r.map(d=>n.jsx(fr,{id:d.id,message:d.message,title:d.title,variant:d.variant,duration:d.duration,details:d.details,onClose:p},d.id))})]})}function wr(){const e=o.useContext(se);if(!e)throw new Error("useToast must be used within a ToastProvider");return e}Ee.createRoot(document.getElementById("root")).render(n.jsx(o.StrictMode,{children:n.jsx(pe,{children:n.jsx(Me,{children:n.jsx($e,{children:n.jsx(hr,{children:n.jsx(yr,{children:n.jsx(dr,{})})})})})})}));export{Ye as C,Xe as E,Ze as I,Qe as L,er as T,oe as X,Be as a,_e as b,R as c,wr as d,Ie as e,Je as f,n as j,Ue as u};
