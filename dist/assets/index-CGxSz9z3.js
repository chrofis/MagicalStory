const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LandingPage-Bg_fpYu6.js","assets/vendor-react-CHhk3aw2.js","assets/api-WYi0Wbsp.js","assets/Textarea-CQX4k8u2.js","assets/sparkles-D6pSef4M.js","assets/palette-C8ap_Tbe.js","assets/download-CNNqD-cM.js","assets/camera-DZUKPCb9.js","assets/printer-CMXhanUX.js","assets/vendor-firebase-DTVMaYMy.js","assets/StoryWizard-CA191bdP.js","assets/circle-x-CS-wYotF.js","assets/clock-BvzsLq22.js","assets/Modal-Cgv0wN_0.js","assets/shopping-cart-Btscm8nx.js","assets/check-KDYuSNES.js","assets/trash-2-wN30zXxf.js","assets/arrow-left-C0GAd7C5.js","assets/MyStories-BYzT3nIl.js","assets/Pricing-BOE6YDsC.js","assets/MyOrders-tlE7GxuG.js","assets/AdminDashboard-DF3Gu9Ip.js","assets/BookBuilder-C-oxgBbY.js","assets/ResetPassword-Bx6AGxpj.js","assets/EmailVerified-C7_Nai3U.js","assets/TermsOfService-DnGhqtpO.js","assets/PrivacyPolicy-Cs85qix0.js","assets/Impressum-6mOTJr5E.js"])))=>i.map(i=>d[i]);
import{r as Ce,a as Re,b as a,u as Ie,R as ke,c as C,B as xe}from"./vendor-react-CHhk3aw2.js";import{i as _e,g as Oe,G as Ne,s as Le,b as Z,a as De,c as Ge,d as je}from"./vendor-firebase-DTVMaYMy.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))g(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&g(f)}).observe(document,{childList:!0,subtree:!0});function t(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function g(l){if(l.ep)return;l.ep=!0;const c=t(l);fetch(l.href,c)}})();var F={exports:{}},D={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H;function ze(){if(H)return D;H=1;var e=Ce(),r=Symbol.for("react.element"),t=Symbol.for("react.fragment"),g=Object.prototype.hasOwnProperty,l=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function f(p,u,h){var y,E={},v=null,P=null;h!==void 0&&(v=""+h),u.key!==void 0&&(v=""+u.key),u.ref!==void 0&&(P=u.ref);for(y in u)g.call(u,y)&&!c.hasOwnProperty(y)&&(E[y]=u[y]);if(p&&p.defaultProps)for(y in u=p.defaultProps,u)E[y]===void 0&&(E[y]=u[y]);return{$$typeof:r,type:p,key:v,ref:P,props:E,_owner:l.current}}return D.Fragment=t,D.jsx=f,D.jsxs=f,D}var q;function Ue(){return q||(q=1,F.exports=ze()),F.exports}var n=Ue(),j={},J;function $e(){if(J)return j;J=1;var e=Re();return j.createRoot=e.createRoot,j.hydrateRoot=e.hydrateRoot,j}var Be=$e();const Fe="modulepreload",Ve=function(e){return"/"+e},Y={},R=function(r,t,g){let l=Promise.resolve();if(t&&t.length>0){let f=function(h){return Promise.all(h.map(y=>Promise.resolve(y).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),u=(p==null?void 0:p.nonce)||(p==null?void 0:p.getAttribute("nonce"));l=f(t.map(h=>{if(h=Ve(h),h in Y)return;Y[h]=!0;const y=h.endsWith(".css"),E=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${E}`))return;const v=document.createElement("link");if(v.rel=y?"stylesheet":Fe,y||(v.as="script"),v.crossOrigin="",v.href=h,u&&v.setAttribute("nonce",u),document.head.appendChild(v),y)return new Promise((P,k)=>{v.addEventListener("load",P),v.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${h}`)))})}))}function c(f){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=f,window.dispatchEvent(p),!p.defaultPrevented)throw f}return l.then(f=>{for(const p of f||[])p.status==="rejected"&&c(p.reason);return r().catch(c)})};function Me({size:e="md",fullScreen:r=!1,message:t}){const g={sm:"w-6 h-6 border-2",md:"w-10 h-10 border-3",lg:"w-16 h-16 border-4"},l=n.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[n.jsx("div",{className:`${g[e]} spinner`}),t&&n.jsx("p",{className:"text-indigo-600 font-medium",children:t})]});return r?n.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 flex items-center justify-center z-50",children:l}):l}let T={isAdmin:!1,prefix:"ðŸª„"};const N={debug:"color: #9ca3af; font-weight: normal;",info:"color: #6366f1; font-weight: normal;",warn:"color: #f59e0b; font-weight: bold;",error:"color: #ef4444; font-weight: bold;",success:"color: #22c55e; font-weight: bold;"};function Ke(e){T={...T,...e},T.isAdmin&&console.log("%cðŸ”“ Admin logging enabled",N.success)}function We(){return T.isAdmin}function Q(e,...r){T.isAdmin&&console.log(`%c${T.prefix} [DEBUG] ${e}`,N.debug,...r)}function ee(e,...r){T.isAdmin&&console.log(`%c${T.prefix} [INFO] ${e}`,N.info,...r)}function re(e,...r){T.isAdmin&&console.log(`%c${T.prefix} âœ“ ${e}`,N.success,...r)}function te(e,...r){console.warn(`%c${T.prefix} [WARN] ${e}`,N.warn,...r)}function ne(e,...r){console.error(`%c${T.prefix} [ERROR] ${e}`,N.error,...r)}function oe(e){T.isAdmin&&console.group(`${T.prefix} ${e}`)}function ae(){T.isAdmin&&console.groupEnd()}function se(e){T.isAdmin&&console.table(e)}function ie(e){T.isAdmin&&console.time(`${T.prefix} ${e}`)}function le(e){T.isAdmin&&console.timeEnd(`${T.prefix} ${e}`)}function He(e){const r=`[${e}]`;return{debug:(t,...g)=>Q(`${r} ${t}`,...g),info:(t,...g)=>ee(`${r} ${t}`,...g),success:(t,...g)=>re(`${r} ${t}`,...g),warn:(t,...g)=>te(`${r} ${t}`,...g),error:(t,...g)=>ne(`${r} ${t}`,...g),group:t=>oe(`${r} ${t}`),groupEnd:ae,table:se,time:t=>ie(`${r} ${t}`),timeEnd:t=>le(`${r} ${t}`)}}const w={configure:Ke,isVerbose:We,debug:Q,info:ee,success:re,warn:te,error:ne,group:oe,groupEnd:ae,table:se,time:ie,timeEnd:le,create:He},M={};let x="localStorage",X=!1;function L(){if(X)return;X=!0;const e="__storage_test__";try{localStorage.setItem(e,e),localStorage.removeItem(e),x="localStorage";return}catch{console.warn("localStorage not available, trying sessionStorage")}try{sessionStorage.setItem(e,e),sessionStorage.removeItem(e),x="sessionStorage",console.warn("Using sessionStorage as fallback (session will not persist)");return}catch{console.warn("sessionStorage not available, using memory storage")}x="memory",console.warn("Using memory storage (session will be lost on page refresh)")}function K(){return L(),x==="localStorage"?localStorage:x==="sessionStorage"?sessionStorage:null}function qe(e){L();const r=K();if(r)try{return r.getItem(e)}catch{}return M[e]??null}function Je(e,r){L();const t=K();if(t)try{return t.setItem(e,r),!0}catch(g){console.warn(`Failed to save to ${x}:`,g)}return M[e]=r,x==="memory"}function ce(e){L();const r=K();if(r)try{r.removeItem(e)}catch{}delete M[e]}function Ye(){["auth_token","current_user","impersonation_state","auth_redirect_url","pendingStoryGeneration"].forEach(r=>ce(r))}function Xe(){return L(),x}function Ze(){return L(),x==="localStorage"}const S={AUTH_TOKEN:"auth_token",CURRENT_USER:"current_user",IMPERSONATION_STATE:"impersonation_state",AUTH_REDIRECT_URL:"auth_redirect_url",PENDING_STORY_GENERATION:"pendingStoryGeneration",LANGUAGE:"magicalstory_language",STORIES_SELECTED:"mystories_selected"},m={getItem:qe,setItem:Je,removeItem:ce,clearAuthStorage:Ye,getStorageType:Xe,isPersistentStorage:Ze,STORAGE_KEYS:S},Qe={apiKey:"AIzaSyCtdyVIpckWhIfy1_9O8qOaEnTXFuiRYaQ",authDomain:"magical-story-3b745.firebaseapp.com",projectId:"magical-story-3b745",storageBucket:"magical-story-3b745.firebasestorage.app",messagingSenderId:"69965481554",appId:"1:69965481554:web:d264515ca92d2306f5018b",measurementId:"G-TERDSLHHDG"},er=_e(Qe),U=Oe(er),V=new Ne;V.setCustomParameters({prompt:"select_account"});async function rr(){try{return(await Le(U,V,Z)).user}catch(e){const r=e;throw console.error("Popup sign-in failed:",r.code,r.message),r.code==="auth/popup-blocked"||r.code==="auth/popup-closed-by-user"||r.code==="auth/cancelled-popup-request"?(console.log("Popup failed, trying redirect..."),await De(U,V),new Error("Redirecting to Google...")):e}}async function tr(){try{const e=await je(U,Z);return e?(console.log("Redirect result: user found"),e.user):null}catch(e){return console.error("Error handling redirect result:",e),null}}async function nr(e){return e.getIdToken()}async function or(){await Ge(U)}const ue=a.createContext(null),I="",ar=8640*60*1e3;function sr({children:e}){const[r,t]=a.useState({isAuthenticated:!1,user:null,token:null,isImpersonating:!1,originalAdmin:null}),[g,l]=a.useState(!0),[c,f]=a.useState(null),p=a.useRef(!1),u=a.useRef(!1),h=a.useRef(null);a.useEffect(()=>{const d=m.getStorageType();d==="sessionStorage"?f("Your session will not persist after closing the browser (private mode detected)"):d==="memory"&&f("Your session will be lost on page refresh (storage unavailable)")},[]);const y=a.useCallback(d=>{try{const o=JSON.parse(atob(d.split(".")[1]));return o.exp?o.exp*1e3:null}catch{return null}},[]),E=a.useCallback(async()=>{const d=m.getItem(S.AUTH_TOKEN);if(!d)return!1;try{const o=await fetch(`${I}/api/auth/refresh`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`}});if(!o.ok)return w.warn("Token refresh failed, user may need to re-login"),!1;const s=await o.json();return m.setItem(S.AUTH_TOKEN,s.token),t(i=>({...i,token:s.token})),w.info("Token refreshed successfully"),!0}catch(o){return w.error("Token refresh error:",o),!1}},[]),v=a.useCallback(d=>{h.current&&clearInterval(h.current);const o=y(d);if(!o)return;const s=Date.now(),i=o-s-ar;i>0?(h.current=setTimeout(async()=>{if(await E()){const b=m.getItem(S.AUTH_TOKEN);b&&v(b)}},i),w.info(`Token refresh scheduled in ${Math.round(i/1e3/60)} minutes`)):s<o&&E()},[y,E]);a.useEffect(()=>{const d=m.getItem("token");d&&!m.getItem(S.AUTH_TOKEN)&&(m.setItem(S.AUTH_TOKEN,d),m.removeItem("token"));const o=m.getItem(S.AUTH_TOKEN),s=m.getItem(S.CURRENT_USER);if(o&&s)try{const i=y(o);if(i&&Date.now()>=i){w.warn("Stored token has expired, clearing session"),m.clearAuthStorage(),l(!1);return}const A=JSON.parse(s),b=m.getItem(S.IMPERSONATION_STATE);let O=!1,B=null;if(b)try{const W=JSON.parse(b);O=W.isImpersonating||!1,B=W.originalAdmin||null}catch{m.removeItem(S.IMPERSONATION_STATE)}t({isAuthenticated:!0,user:A,token:o,isImpersonating:O,originalAdmin:B}),w.configure({isAdmin:B?!0:A.role==="admin"}),w.info(`Session restored for ${A.username}${O?" (impersonating)":""}`),v(o)}catch{m.clearAuthStorage()}l(!1)},[y,v]);const P=a.useCallback((d,o)=>{if(m.setItem(S.AUTH_TOKEN,d),m.setItem(S.CURRENT_USER,JSON.stringify(o)),m.removeItem(S.IMPERSONATION_STATE),!m.getItem(S.LANGUAGE)&&o.preferredLanguage){const A={English:"en",German:"de",French:"fr"}[o.preferredLanguage]||"en";m.setItem(S.LANGUAGE,A),window.dispatchEvent(new Event("languageUpdated"))}v(d)},[v]),k=a.useCallback(async(d,o)=>{const s=await fetch(`${I}/api/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:d,password:o})});if(!s.ok){const b=await s.json(),O=new Error(b.error||"Login failed");throw O.code=b.code,O}const i=await s.json(),A={id:i.user.id,username:i.user.username,email:i.user.email,role:i.user.role,credits:i.user.credits,preferredLanguage:i.user.preferredLanguage,emailVerified:i.user.emailVerified,photoConsentAt:i.user.photoConsentAt};P(i.token,A),t({isAuthenticated:!0,user:A,token:i.token,isImpersonating:!1,originalAdmin:null}),w.configure({isAdmin:A.role==="admin"}),w.success(`Logged in as ${A.username} (${A.role})`)},[P]),$=a.useCallback(async(d,o,s,i)=>{const A=await fetch(`${I}/api/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:d,password:o,email:s,website:i==null?void 0:i.website,_formStartTime:i==null?void 0:i._formStartTime})});if(!A.ok){const b=await A.json();throw new Error(b.error||"Registration failed")}await k(d,o)},[k]),G=a.useCallback(async d=>{const o=await nr(d),s=await fetch(`${I}/api/auth/firebase`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({idToken:o})});if(!s.ok){const b=await s.json();throw new Error(b.error||"Firebase authentication failed")}const i=await s.json(),A={id:i.user.id,username:i.user.username,email:i.user.email,role:i.user.role,credits:i.user.credits,preferredLanguage:i.user.preferredLanguage,emailVerified:i.user.emailVerified,photoConsentAt:i.user.photoConsentAt};return P(i.token,A),t({isAuthenticated:!0,user:A,token:i.token,isImpersonating:!1,originalAdmin:null}),w.configure({isAdmin:A.role==="admin"}),w.success(`Logged in with Google as ${A.username}`),A},[P]),ye=a.useCallback(async d=>{const o=d||window.location.pathname||"/create";m.setItem(S.AUTH_REDIRECT_URL,o);try{const s=await rr();await G(s),m.removeItem(S.AUTH_REDIRECT_URL)}catch(s){if(s instanceof Error&&s.message.includes("Redirecting")){w.info("Google sign-in redirecting...");return}throw s}},[G]),Se=a.useCallback(async d=>{const o=await fetch(`${I}/api/auth/reset-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:d})});if(!o.ok){const s=await o.json();throw new Error(s.error||"Password reset failed")}},[]),Ae=a.useCallback(async(d,o)=>{const s=m.getItem(S.AUTH_TOKEN);if(!s)throw new Error("Not authenticated");const i=await fetch(`${I}/api/auth/change-password`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({currentPassword:d,newPassword:o})});if(!i.ok){const A=await i.json();throw new Error(A.error||"Password change failed")}w.success("Password changed successfully")},[]),we=a.useCallback(async()=>{w.info("Logging out..."),h.current&&(clearTimeout(h.current),h.current=null);const d=m.getItem(S.AUTH_TOKEN);if(d)try{await fetch(`${I}/api/auth/logout`,{method:"POST",headers:{Authorization:`Bearer ${d}`}})}catch{}m.clearAuthStorage(),or().catch(o=>{console.warn("Firebase sign out error:",o)}),t({isAuthenticated:!1,user:null,token:null,isImpersonating:!1,originalAdmin:null}),w.configure({isAdmin:!1})},[]),Ee=a.useCallback(async d=>{const o=await fetch(`${I}/api/admin/impersonate/${d}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r.token}`}});if(!o.ok){const b=await o.json();throw new Error(b.error||"Impersonation failed")}const s=await o.json(),i={id:s.user.id,username:s.user.username,email:s.user.email,role:s.user.role,credits:s.user.credits||0,emailVerified:s.user.emailVerified,photoConsentAt:s.user.photoConsentAt},A={isImpersonating:!0,originalAdmin:s.originalAdmin};m.setItem(S.AUTH_TOKEN,s.token),m.setItem(S.CURRENT_USER,JSON.stringify(i)),m.setItem(S.IMPERSONATION_STATE,JSON.stringify(A)),t({isAuthenticated:!0,user:i,token:s.token,isImpersonating:!0,originalAdmin:s.originalAdmin}),w.configure({isAdmin:!0}),w.info(`Now impersonating ${i.username}`)},[r.token]),ve=a.useCallback(async()=>{const d=await fetch(`${I}/api/admin/stop-impersonate`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r.token}`}});if(!d.ok){const i=await d.json();throw new Error(i.error||"Failed to stop impersonation")}const o=await d.json(),s={id:o.user.id,username:o.user.username,email:o.user.email,role:o.user.role,credits:o.user.credits||0,emailVerified:o.user.emailVerified,photoConsentAt:o.user.photoConsentAt};m.setItem(S.AUTH_TOKEN,o.token),m.setItem(S.CURRENT_USER,JSON.stringify(s)),m.removeItem(S.IMPERSONATION_STATE),t({isAuthenticated:!0,user:s,token:o.token,isImpersonating:!1,originalAdmin:null}),w.configure({isAdmin:!0}),w.info(`Stopped impersonating, back to ${s.username}`)},[r.token]);a.useEffect(()=>{(async()=>{if(!p.current){if(p.current=!0,r.isAuthenticated||r.token){w.info("Already authenticated, skipping redirect check");return}try{w.info("Checking for Google redirect result...");const o=await tr();if(o){if(u.current){w.info("Auth already in progress, skipping");return}u.current=!0,w.info("Firebase user from redirect detected, completing login...");try{await G(o);const s=m.getItem(S.AUTH_REDIRECT_URL);s&&s!==window.location.pathname&&(m.removeItem(S.AUTH_REDIRECT_URL),w.info("Navigating to stored redirect URL:",s),window.location.replace(s))}finally{u.current=!1}}else w.info("No pending Google redirect")}catch(o){u.current=!1,console.error("Redirect result error:",o)}}})()},[r.isAuthenticated,r.token,G]);const Te=a.useCallback(d=>{t(o=>{if(!o.user)return o;const s={...o.user,credits:d};return m.setItem(S.CURRENT_USER,JSON.stringify(s)),{...o,user:s}})},[]),be=a.useCallback(async()=>{const d=m.getItem(S.AUTH_TOKEN);if(d)try{const o=await fetch(`${I}/api/auth/me`,{headers:{Authorization:`Bearer ${d}`}});if(!o.ok)return;const s=await o.json(),i={id:s.user.id,username:s.user.username,email:s.user.email,role:s.user.role,credits:s.user.credits,preferredLanguage:s.user.preferredLanguage,emailVerified:s.user.emailVerified,photoConsentAt:s.user.photoConsentAt};m.setItem(S.CURRENT_USER,JSON.stringify(i)),t(A=>({...A,user:i}))}catch(o){w.error("Failed to refresh user:",o)}},[]),Pe=a.useCallback(async()=>{const d=m.getItem(S.AUTH_TOKEN);if(!d)throw new Error("Not authenticated");const o=await fetch(`${I}/api/auth/photo-consent`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`}});if(!o.ok){const i=await o.json();throw new Error(i.error||"Failed to record consent")}const s=await o.json();t(i=>{if(!i.user)return i;const A={...i.user,photoConsentAt:s.photoConsentAt};return m.setItem(S.CURRENT_USER,JSON.stringify(A)),{...i,user:A}}),w.info("Photo consent recorded")},[]);return a.useEffect(()=>()=>{h.current&&clearTimeout(h.current)},[]),n.jsx(ue.Provider,{value:{...r,login:k,register:$,loginWithGoogle:ye,resetPassword:Se,changePassword:Ae,logout:we,updateCredits:Te,refreshUser:be,refreshToken:E,impersonate:Ee,stopImpersonating:ve,recordPhotoConsent:Pe,isLoading:g,storageWarning:c},children:e})}function ir(){const e=a.useContext(ue);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e}const lr={en:{title:"Magical Story",subtitle:"Personalize your story to create magic",heroTitle:"Become the hero of your story",heroSubtitle:"",heroDescription:"Turn your wildest ideas into a breathtaking personalized tale.",bookText:"Get a beautifully printed book and make someone feel like the legend they truly are.",startJourney:"Start Your Adventure",selectLanguage:"Choose your language",login:"Login",register:"Register",logout:"Logout",username:"Username",password:"Password",email:"Email (optional)",welcomeBack:"Welcome Back!",createAccount:"Create Account",noAccount:"Don't have an account?",haveAccount:"Already have an account?",signUp:"Sign up",signIn:"Sign in",loginRequired:"Please login to continue",continueWithGoogle:"Continue with Google",continueWithApple:"Continue with Apple",orContinueWith:"or continue with",forgotPassword:"Forgot password?",resetPassword:"Reset Password",resetPasswordDesc:"Enter your email and we'll send you a reset link",sendResetLink:"Send Reset Link",resetLinkSent:"Password reset email sent! Check your inbox.",backToLogin:"Back to login",chooseStoryType:"Choose Your Story Type",chooseArtStyle:"Choose Your Art Style",artStyleDescription:"Select the visual style for your story",addCustomStoryType:"Add Custom Story Type",storyTypeName:"Story Type Name",storyTypeEmoji:"Emoji",addStoryType:"Add",createCharacters:"Create Your Characters",characterCreated:"Character Created!",createAnother:"Create Another Character",continueToRelationships:"Continue to Relationships",yourCharacters:"Your Characters:",startCreating:"Start Creating Character",characterName:"Character Name",characterPhoto:"Character Photo",uploadPhoto:"Upload Photo",uploadPhotoFirst:"Please upload a photo to continue",photoGoodExamples:"Good: Full body or upper body",photoBadExamples:"Avoid: Close-up face only, sunglasses, hats, helmets, blurry",noFaceDetected:"No face detected in the photo. Please upload a clear photo showing a face.",orDescribe:"OR describe the character",characterAge:"Age",hairColor:"Hair Color",otherFeatures:"Other Features",descriptionPlaceholder:"e.g., Blue eyes, wears glasses, has freckles",gender:"Gender",male:"Male",female:"Female",other:"Unknown",age:"Age",strengths:"Strengths",weaknesses:"Weaknesses",selectAtLeast:"Select at least",selected:"Selected",addCustomStrengths:"Add custom strengths",addCustomWeaknesses:"Add custom weaknesses",addCustomFears:"Add custom fears",specialDetails:"Hobbies, Interests, Favourite Cuddly Toy, Job and Other Details",specialDetailsPlaceholder:"e.g., Enjoys painting, loves dinosaurs, favourite teddy bear called Bruno, wants to be a firefighter",fears:"Fears",addCustomRelationship:"Add custom relationship",cancel:"Cancel",saveCharacter:"Save Character",editCharacter:"Edit",deleteCharacter:"Delete",defineRelationships:"Define Character Relationships",defineRelationshipsDesc:"Define how each character relates to the others.",is:"is",reverseRelationship:"Reverse relationship:",storySettings:"Story Settings",selectMainCharacters:"Select Main Characters (max 2)",numberOfPages:"Number of Pages",readingLevel:"Reading Level",firstGrade:"Picture Book",firstGradeDesc:`Ages: 3-6
Language: simple vocabulary, short sentences
Recommended pages: 10-20
Ideal for: 1-2 characters, simple stories`,standard:"Chapter Book",standardDesc:`Ages: 6-10
Language: accessible vocabulary, normal sentences
Recommended pages: 20-30
Ideal for: 2-4 characters`,advanced:"Young Reader",advancedDesc:`Ages: 10+
Language: rich vocabulary, complex sentences
Recommended pages: 30-50
Ideal for: many characters, complex storylines`,generateStory:"Generate Story!",creating:"Creating Your Story...",storyReady:"Your Story is Ready!",downloadTXT:"Download as TXT",downloadPDF:"Download as PDF",downloadPrompt:"Download Prompt",viewPrompt:"View Prompt",hidePrompt:"Hide Prompt",promptUsed:"Prompt Used to Generate Story:",createAnotherStory:"Create Another Story",back:"Back",next:"Next",exportConfig:"Export Configuration",exportStoryInfo:"Export Story Info (MD)",importConfig:"Import Configuration",charactersCreated:"You've created {count} character{s} so far.",mainCharacter:"Main Character",apiKeyRequired:"API Key Required",apiKeyPrompt:"Please enter your Anthropic API key to generate stories:",apiKeyPlaceholder:"sk-ant-...",saveApiKey:"Save API Key",apiKeyNote:"Your API key is stored locally in your browser and never sent anywhere except to Anthropic.",promptPreview:"Prompt Preview",showPromptPreview:"Show Prompt",hidePromptPreview:"Hide Prompt",editPrompt:"Edit Prompt",resetPrompt:"Reset to Default",storyDetails:"Story Plot / Story Details",storyDetailsOptional:"(optional)",storyDetailsPlaceholder:"e.g., Location: Enchanted forest, Special elements: Magical talking animals, Time period: Medieval times...",generateOutline:"Generate Outline",generatingOutline:"Generating Outline...",outlineReady:"Story Outline",editOutline:"You can edit the outline below before generating the full story:",regenerateOutline:"Regenerate Outline",createScenes:"Create Scene Descriptions",creatingScenes:"Creating Scene Descriptions...",scenesReady:"Scene Descriptions",downloadScenes:"Download Scenes",sceneForPage:"Scene for Page",yourStory:"Your Story",uploadStory:"Upload Story",uploadStoryDesc:"Upload an existing story text file to generate scene descriptions",generateImages:"Generate Scene Images",generatingImages:"Generating Images...",imagesReady:"Scene Images",downloadImage:"Download Image",geminiApiKey:"Gemini API Key",geminiApiKeyPrompt:"Enter your Google Gemini API key to generate images:",geminiApiKeyNote:"Get your key from Google AI Studio",imageForPage:"Image for Page",generateAvatar:"Generate Pixar Avatar",generatingAvatar:"Generating Avatar...",avatarGenerated:"Avatar Generated!",useGeneratedAvatar:"Use Generated Avatar",keepOriginal:"Keep Original Photo",uploadType:"What are you uploading?",uploadRealPhoto:"Real Photo (will generate avatar)",uploadReadyAvatar:"Ready Avatar (already stylized)",editStory:"Edit Story",saveStory:"Save Story",editScene:"Edit Scene",saveScene:"Save Scene",editImage:"Edit Image",regenerateImage:"Regenerate Image",showEditPrompt:"Show Prompt",hideEditPrompt:"Hide Prompt",editInstruction:"What should be changed?",applyEdit:"Apply Edit",passwordMinChars:"Minimum 6 characters",selectStrengthsFlaws:"Please select at least 3 strengths and 2 flaws",fillAllFields:"Please fill in all fields",networkError:"Network error. Please check your connection and try again.",operationTimeout:"The operation timed out. Please try again.",failedGeneric:"An error occurred. Please try again.",generationStalled:"Generation seems stuck",generationStalledDesc:"No progress for a while. This can happen due to high server load.",impersonationViewingAs:"Viewing as",impersonationStopViewing:"Stop viewing",impersonationStopping:"Stopping...",continueWaiting:"Keep Waiting",cancelGeneration:"Cancel"},de:{title:"Magical Story",subtitle:"Personalisiere deine Geschichte fÃ¼r Magie",heroTitle:"Werde zum Helden deiner Geschichte",heroSubtitle:"",heroDescription:"Verwandle deine wildesten Ideen in eine atemberaubende personalisierte Geschichte.",bookText:"Erhalte ein wunderschÃ¶n gedrucktes Buch und gib jemandem das GefÃ¼hl, die Legende zu sein, die er wirklich ist.",startJourney:"Starte dein Abenteuer",selectLanguage:"WÃ¤hle deine Sprache",login:"Anmelden",register:"Registrieren",logout:"Abmelden",username:"Benutzername",password:"Passwort",email:"E-Mail (optional)",welcomeBack:"Willkommen zurÃ¼ck!",createAccount:"Konto erstellen",noAccount:"Noch kein Konto?",haveAccount:"Bereits ein Konto?",signUp:"Registrieren",signIn:"Anmelden",loginRequired:"Bitte melde dich an, um fortzufahren",continueWithGoogle:"Mit Google fortfahren",continueWithApple:"Mit Apple fortfahren",orContinueWith:"oder fortfahren mit",forgotPassword:"Passwort vergessen?",resetPassword:"Passwort zurÃ¼cksetzen",resetPasswordDesc:"Gib deine E-Mail ein und wir senden dir einen Link zum ZurÃ¼cksetzen",sendResetLink:"Link senden",resetLinkSent:"E-Mail zum ZurÃ¼cksetzen gesendet! ÃœberprÃ¼fe deinen Posteingang.",backToLogin:"ZurÃ¼ck zur Anmeldung",chooseStoryType:"WÃ¤hle deinen Geschichtentyp",chooseArtStyle:"WÃ¤hle deinen Kunststil",artStyleDescription:"WÃ¤hle den visuellen Stil fÃ¼r deine Geschichte",addCustomStoryType:"Eigenen Geschichtentyp hinzufÃ¼gen",storyTypeName:"Name des Geschichtentyps",storyTypeEmoji:"Emoji",addStoryType:"HinzufÃ¼gen",createCharacters:"Erstelle deine Charaktere",characterCreated:"Charakter erstellt!",createAnother:"Weiteren Charakter erstellen",continueToRelationships:"Weiter zu Beziehungen",yourCharacters:"Deine Charaktere:",startCreating:"Charakter erstellen beginnen",characterName:"Charaktername",characterPhoto:"Charakterfoto",uploadPhoto:"Foto hochladen",uploadPhotoFirst:"Bitte laden Sie ein Foto hoch, um fortzufahren",photoGoodExamples:"Gut: GanzkÃ¶rper oder OberkÃ¶rper",photoBadExamples:"Vermeiden: Nur Gesicht, Sonnenbrille, HÃ¼te, Helme, unscharf",noFaceDetected:"Kein Gesicht im Foto erkannt. Bitte laden Sie ein klares Foto mit einem sichtbaren Gesicht hoch.",orDescribe:"ODER Figur beschreiben",characterAge:"Alter",hairColor:"Haarfarbe",otherFeatures:"Sonstige Merkmale",descriptionPlaceholder:"z.B. Blaue Augen, trÃ¤gt Brille, hat Sommersprossen",gender:"Geschlecht",male:"MÃ¤nnlich",female:"Weiblich",other:"Unbekannt",age:"Alter",strengths:"StÃ¤rken",weaknesses:"SchwÃ¤chen",selectAtLeast:"WÃ¤hle mindestens",selected:"AusgewÃ¤hlt",addCustomStrengths:"Eigene StÃ¤rken hinzufÃ¼gen",addCustomWeaknesses:"Eigene SchwÃ¤chen hinzufÃ¼gen",addCustomFears:"Eigene Ã„ngste hinzufÃ¼gen",specialDetails:"Hobbys, Interessen, Lieblingskuscheltier, Beruf und andere Besonderheiten",specialDetailsPlaceholder:"z.B. Malt gerne, liebt Dinosaurier, Lieblingsteddy heisst Bruno, will Feuerwehrmann werden",fears:"Ã„ngste",addCustomRelationship:"Eigene Beziehung hinzufÃ¼gen",cancel:"Abbrechen",saveCharacter:"Charakter speichern",editCharacter:"Bearbeiten",deleteCharacter:"LÃ¶schen",defineRelationships:"Charakterbeziehungen definieren",defineRelationshipsDesc:"Definiere, wie die Charaktere zueinander stehen.",is:"ist",reverseRelationship:"Umgekehrte Beziehung:",storySettings:"Geschichten-Einstellungen",selectMainCharacters:"Hauptfiguren auswÃ¤hlen (max 2)",numberOfPages:"Anzahl der Seiten",readingLevel:"Lesestufe",firstGrade:"Bilderbuch",firstGradeDesc:`Alter: 3-6
Sprache: einfacher Wortschatz, kurze SÃ¤tze
Empfohlene Seiten: 10-20
Ideal fÃ¼r: 1-2 Figuren, einfache Geschichten`,standard:"Kinderbuch",standardDesc:`Alter: 6-10
Sprache: verstÃ¤ndlicher Wortschatz, normale SÃ¤tze
Empfohlene Seiten: 20-30
Ideal fÃ¼r: 2-4 Figuren`,advanced:"Jugendbuch",advancedDesc:`Alter: 10+
Sprache: reicher Wortschatz, komplexe SÃ¤tze
Empfohlene Seiten: 30-50
Ideal fÃ¼r: viele Figuren, komplexe Handlung`,generateStory:"Geschichte erstellen!",creating:"Erstelle deine Geschichte...",storyReady:"Deine Geschichte ist fertig!",downloadTXT:"Als TXT herunterladen",downloadPDF:"Als PDF herunterladen",downloadPrompt:"Prompt herunterladen",viewPrompt:"Prompt anzeigen",hidePrompt:"Prompt ausblenden",promptUsed:"Verwendeter Prompt:",createAnotherStory:"Neue Geschichte erstellen",back:"ZurÃ¼ck",next:"Weiter",exportConfig:"Konfiguration exportieren",exportStoryInfo:"Story-Info exportieren (MD)",importConfig:"Konfiguration importieren",charactersCreated:"Du hast bisher {count} Charakter{s} erstellt.",mainCharacter:"Hauptfigur",apiKeyRequired:"API-SchlÃ¼ssel erforderlich",apiKeyPrompt:"Bitte geben Sie Ihren Anthropic API-SchlÃ¼ssel ein:",apiKeyPlaceholder:"sk-ant-...",saveApiKey:"API-SchlÃ¼ssel speichern",apiKeyNote:"Ihr API-SchlÃ¼ssel wird lokal im Browser gespeichert.",promptPreview:"Prompt-Vorschau",showPromptPreview:"Prompt anzeigen",hidePromptPreview:"Prompt ausblenden",editPrompt:"Prompt bearbeiten",resetPrompt:"Auf Standard zurÃ¼cksetzen",storyDetails:"Handlung / Angaben zur Geschichte",storyDetailsOptional:"(optional)",storyDetailsPlaceholder:"z.B. Ort: Verzauberter Wald, Besondere Elemente: Magische sprechende Tiere, Zeitperiode: Mittelalter...",generateOutline:"Gliederung erstellen",generatingOutline:"Gliederung wird erstellt...",outlineReady:"Story-Gliederung",editOutline:"Sie kÃ¶nnen die Gliederung unten bearbeiten, bevor Sie die vollstÃ¤ndige Geschichte erstellen:",regenerateOutline:"Gliederung neu erstellen",createScenes:"Szenen-Beschreibungen erstellen",creatingScenes:"Szenen-Beschreibungen werden erstellt...",scenesReady:"Szenen-Beschreibungen",downloadScenes:"Szenen herunterladen",sceneForPage:"Szene fÃ¼r Seite",yourStory:"Deine Geschichte",uploadStory:"Geschichte hochladen",uploadStoryDesc:"Laden Sie eine vorhandene Story-Textdatei hoch, um Szenenbeschreibungen zu generieren",generateImages:"Szenenbilder generieren",generatingImages:"Bilder werden generiert...",imagesReady:"Szenenbilder",downloadImage:"Bild herunterladen",geminiApiKey:"Gemini API-SchlÃ¼ssel",geminiApiKeyPrompt:"Geben Sie Ihren Google Gemini API-SchlÃ¼ssel ein:",geminiApiKeyNote:"Holen Sie sich Ihren SchlÃ¼ssel von Google AI Studio",imageForPage:"Bild fÃ¼r Seite",generateAvatar:"Pixar-Avatar erstellen",generatingAvatar:"Avatar wird erstellt...",avatarGenerated:"Avatar erstellt!",useGeneratedAvatar:"Generierten Avatar verwenden",keepOriginal:"Originalfoto behalten",uploadType:"Was laden Sie hoch?",uploadRealPhoto:"Echtes Foto (Avatar wird generiert)",uploadReadyAvatar:"Fertiger Avatar (bereits stilisiert)",editStory:"Geschichte bearbeiten",saveStory:"Geschichte speichern",editScene:"Szene bearbeiten",saveScene:"Szene speichern",editImage:"Bild bearbeiten",regenerateImage:"Bild neu generieren",showEditPrompt:"Prompt anzeigen",hideEditPrompt:"Prompt ausblenden",editInstruction:"Was soll geÃ¤ndert werden?",applyEdit:"Ã„nderung anwenden",passwordMinChars:"Mindestens 6 Zeichen",selectStrengthsFlaws:"Bitte mindestens 3 StÃ¤rken und 2 SchwÃ¤chen wÃ¤hlen",fillAllFields:"Bitte alle Felder ausfÃ¼llen",networkError:"Netzwerkfehler. Bitte Verbindung prÃ¼fen und erneut versuchen.",operationTimeout:"Die Anfrage ist abgelaufen. Bitte erneut versuchen.",failedGeneric:"Ein Fehler ist aufgetreten. Bitte erneut versuchen.",generationStalled:"Generierung scheint hÃ¤ngen zu bleiben",generationStalledDesc:"Seit einer Weile kein Fortschritt. Dies kann bei hoher Serverlast passieren.",impersonationViewingAs:"Ansicht als",impersonationStopViewing:"Ansicht beenden",impersonationStopping:"Beenden...",continueWaiting:"Weiter warten",cancelGeneration:"Abbrechen"},fr:{title:"Magical Story",subtitle:"Personnalisez votre histoire pour crÃ©er la magie",heroTitle:"Devenez le hÃ©ros de votre histoire",heroSubtitle:"",heroDescription:"Transformez vos idÃ©es les plus folles en un conte personnalisÃ© Ã©poustouflant.",bookText:"Obtenez un livre magnifiquement imprimÃ© et donnez Ã  quelqu'un le sentiment d'Ãªtre la lÃ©gende qu'il est vraiment.",startJourney:"Commencez votre aventure",selectLanguage:"Choisissez votre langue",login:"Connexion",register:"S'inscrire",logout:"DÃ©connexion",username:"Nom d'utilisateur",password:"Mot de passe",email:"Email (facultatif)",welcomeBack:"Bon retour !",createAccount:"CrÃ©er un compte",noAccount:"Pas encore de compte ?",haveAccount:"Vous avez dÃ©jÃ  un compte ?",signUp:"S'inscrire",signIn:"Se connecter",loginRequired:"Veuillez vous connecter pour continuer",continueWithGoogle:"Continuer avec Google",continueWithApple:"Continuer avec Apple",orContinueWith:"ou continuer avec",forgotPassword:"Mot de passe oubliÃ© ?",resetPassword:"RÃ©initialiser le mot de passe",resetPasswordDesc:"Entrez votre e-mail et nous vous enverrons un lien de rÃ©initialisation",sendResetLink:"Envoyer le lien",resetLinkSent:"E-mail de rÃ©initialisation envoyÃ© ! VÃ©rifiez votre boÃ®te de rÃ©ception.",backToLogin:"Retour Ã  la connexion",chooseStoryType:"Choisissez votre type d'histoire",chooseArtStyle:"Choisissez Votre Style Artistique",artStyleDescription:"SÃ©lectionnez le style visuel pour votre histoire",addCustomStoryType:"Ajouter un type d'histoire personnalisÃ©",storyTypeName:"Nom du type d'histoire",storyTypeEmoji:"Emoji",addStoryType:"Ajouter",createCharacters:"CrÃ©ez vos personnages",characterCreated:"Personnage crÃ©Ã© !",createAnother:"CrÃ©er un autre personnage",continueToRelationships:"Continuer vers les Relations",yourCharacters:"Vos personnages :",startCreating:"Commencer Ã  crÃ©er un personnage",characterName:"Nom du personnage",characterPhoto:"Photo du personnage",uploadPhoto:"TÃ©lÃ©charger une Photo",uploadPhotoFirst:"Veuillez tÃ©lÃ©charger une photo pour continuer",photoGoodExamples:"Bien : Corps entier ou buste",photoBadExamples:"Ã‰viter : Gros plan visage, lunettes de soleil, chapeaux, casques, flou",noFaceDetected:"Aucun visage dÃ©tectÃ© dans la photo. Veuillez tÃ©lÃ©charger une photo claire montrant un visage.",orDescribe:"OU dÃ©crivez le personnage",characterAge:"Ã‚ge",hairColor:"Couleur des Cheveux",otherFeatures:"Autres CaractÃ©ristiques",descriptionPlaceholder:"ex. Yeux bleus, porte des lunettes, a des taches de rousseur",gender:"Genre",male:"Masculin",female:"FÃ©minin",other:"Inconnu",age:"Ã‚ge",strengths:"Forces",weaknesses:"Faiblesses",selectAtLeast:"SÃ©lectionnez au moins",selected:"SÃ©lectionnÃ©",addCustomStrengths:"Ajouter des forces personnalisÃ©es",addCustomWeaknesses:"Ajouter des faiblesses personnalisÃ©es",addCustomFears:"Ajouter des peurs personnalisÃ©es",specialDetails:"Loisirs, IntÃ©rÃªts, Peluche PrÃ©fÃ©rÃ©e, MÃ©tier et Autres DÃ©tails",specialDetailsPlaceholder:"ex. Aime peindre, adore les dinosaures, son nounours prÃ©fÃ©rÃ© s'appelle Bruno, veut devenir pompier",fears:"Peurs",addCustomRelationship:"Ajouter une relation personnalisÃ©e",cancel:"Annuler",saveCharacter:"Enregistrer le personnage",editCharacter:"Modifier",deleteCharacter:"Supprimer",defineRelationships:"DÃ©finir les relations entre personnages",defineRelationshipsDesc:"DÃ©finissez comment chaque personnage est liÃ© aux autres.",is:"est",reverseRelationship:"Relation inverse :",storySettings:"ParamÃ¨tres de l'histoire",selectMainCharacters:"SÃ©lectionner les personnages principaux (max 2)",numberOfPages:"Nombre de Pages",readingLevel:"Niveau de Lecture",firstGrade:"Album IllustrÃ©",firstGradeDesc:`Ã‚ge: 3-6
Langue: vocabulaire simple, phrases courtes
Pages recommandÃ©es: 10-20
IdÃ©al pour: 1-2 personnages, histoires simples`,standard:"Livre Enfant",standardDesc:`Ã‚ge: 6-10
Langue: vocabulaire accessible, phrases normales
Pages recommandÃ©es: 20-30
IdÃ©al pour: 2-4 personnages`,advanced:"Roman Jeunesse",advancedDesc:`Ã‚ge: 10+
Langue: vocabulaire riche, phrases complexes
Pages recommandÃ©es: 30-50
IdÃ©al pour: plusieurs personnages, intrigues complexes`,generateStory:"GÃ©nÃ©rer l'histoire !",creating:"CrÃ©ation de votre histoire...",storyReady:"Votre histoire est prÃªte !",downloadTXT:"TÃ©lÃ©charger en TXT",downloadPDF:"TÃ©lÃ©charger en PDF",downloadPrompt:"TÃ©lÃ©charger le Prompt",viewPrompt:"Voir le Prompt",hidePrompt:"Masquer le Prompt",promptUsed:"Prompt utilisÃ© pour gÃ©nÃ©rer l'histoire :",createAnotherStory:"CrÃ©er une autre histoire",back:"Retour",next:"Suivant",exportConfig:"Exporter la Configuration",exportStoryInfo:"Exporter les Infos (MD)",importConfig:"Importer la Configuration",charactersCreated:"Vous avez crÃ©Ã© {count} personnage{s} jusqu'Ã  prÃ©sent.",mainCharacter:"Personnage principal",apiKeyRequired:"ClÃ© API Requise",apiKeyPrompt:"Veuillez entrer votre clÃ© API Anthropic pour gÃ©nÃ©rer des histoires :",apiKeyPlaceholder:"sk-ant-...",saveApiKey:"Enregistrer la ClÃ© API",apiKeyNote:"Votre clÃ© API est stockÃ©e localement dans votre navigateur.",promptPreview:"AperÃ§u du Prompt",showPromptPreview:"Afficher le Prompt",hidePromptPreview:"Masquer le Prompt",editPrompt:"Modifier le Prompt",resetPrompt:"RÃ©initialiser par DÃ©faut",storyDetails:"Intrigue / Contexte du rÃ©cit",storyDetailsOptional:"(facultatif)",storyDetailsPlaceholder:"ex. Lieu : ForÃªt enchantÃ©e, Ã‰lÃ©ments spÃ©ciaux : Animaux magiques parlants, PÃ©riode : Moyen Ã‚ge...",generateOutline:"GÃ©nÃ©rer le Plan",generatingOutline:"GÃ©nÃ©ration du Plan...",outlineReady:"Plan de l'histoire",editOutline:"Vous pouvez modifier le plan ci-dessous avant de gÃ©nÃ©rer l'histoire complÃ¨te :",regenerateOutline:"RegÃ©nÃ©rer le Plan",createScenes:"CrÃ©er les Descriptions de ScÃ¨nes",creatingScenes:"CrÃ©ation des Descriptions de ScÃ¨nes...",scenesReady:"Descriptions de ScÃ¨nes",downloadScenes:"TÃ©lÃ©charger les ScÃ¨nes",sceneForPage:"ScÃ¨ne pour la Page",yourStory:"Votre histoire",uploadStory:"TÃ©lÃ©charger une histoire",uploadStoryDesc:"TÃ©lÃ©chargez un fichier texte existant pour gÃ©nÃ©rer des descriptions de scÃ¨nes",generateImages:"GÃ©nÃ©rer les Images de ScÃ¨nes",generatingImages:"GÃ©nÃ©ration des Images...",imagesReady:"Images de ScÃ¨nes",downloadImage:"TÃ©lÃ©charger l'Image",geminiApiKey:"ClÃ© API Gemini",geminiApiKeyPrompt:"Entrez votre clÃ© API Google Gemini pour gÃ©nÃ©rer des images :",geminiApiKeyNote:"Obtenez votre clÃ© sur Google AI Studio",imageForPage:"Image pour la Page",generateAvatar:"GÃ©nÃ©rer un Avatar Pixar",generatingAvatar:"GÃ©nÃ©ration de l'Avatar...",avatarGenerated:"Avatar GÃ©nÃ©rÃ© !",useGeneratedAvatar:"Utiliser l'Avatar GÃ©nÃ©rÃ©",keepOriginal:"Garder la Photo Originale",uploadType:"Que tÃ©lÃ©chargez-vous ?",uploadRealPhoto:"Photo rÃ©elle (avatar sera gÃ©nÃ©rÃ©)",uploadReadyAvatar:"Avatar prÃªt (dÃ©jÃ  stylisÃ©)",editStory:"Modifier l'histoire",saveStory:"Enregistrer l'histoire",editScene:"Modifier la ScÃ¨ne",saveScene:"Enregistrer la ScÃ¨ne",editImage:"Modifier l'Image",regenerateImage:"RegÃ©nÃ©rer l'Image",showEditPrompt:"Afficher le Prompt",hideEditPrompt:"Masquer le Prompt",editInstruction:"Que faut-il changer ?",applyEdit:"Appliquer la Modification",passwordMinChars:"Minimum 6 caractÃ¨res",selectStrengthsFlaws:"Veuillez sÃ©lectionner au moins 3 forces et 2 dÃ©fauts",fillAllFields:"Veuillez remplir tous les champs",networkError:"Erreur rÃ©seau. Veuillez vÃ©rifier votre connexion et rÃ©essayer.",operationTimeout:"L'opÃ©ration a expirÃ©. Veuillez rÃ©essayer.",failedGeneric:"Une erreur est survenue. Veuillez rÃ©essayer.",generationStalled:"La gÃ©nÃ©ration semble bloquÃ©e",generationStalledDesc:"Aucun progrÃ¨s depuis un moment. Cela peut arriver en cas de forte charge serveur.",impersonationViewingAs:"Vue en tant que",impersonationStopViewing:"Arreter la vue",impersonationStopping:"ArrÃªt...",continueWaiting:"Continuer Ã  attendre",cancelGeneration:"Annuler"}},de=a.createContext(null),z="magicalstory_language";function cr(){var r;const e=(r=navigator.language)==null?void 0:r.toLowerCase();return!e||e.startsWith("de")?"de":e.startsWith("fr")?"fr":(e.startsWith("en"),"en")}function ur({children:e}){const[r,t]=a.useState(()=>{const c=localStorage.getItem(z);return c&&["en","de","fr"].includes(c)?c:cr()});a.useEffect(()=>{localStorage.setItem(z,r),document.documentElement.lang=r},[r]),a.useEffect(()=>{const c=p=>{p.key===z&&p.newValue&&["en","de","fr"].includes(p.newValue)&&t(p.newValue)},f=()=>{const p=localStorage.getItem(z);p&&["en","de","fr"].includes(p)&&p!==r&&t(p)};return window.addEventListener("storage",c),window.addEventListener("languageUpdated",f),()=>{window.removeEventListener("storage",c),window.removeEventListener("languageUpdated",f)}},[r]);const g=c=>{t(c)},l=lr[r];return n.jsx(de.Provider,{value:{language:r,setLanguage:g,t:l},children:e})}function dr(){const e=a.useContext(de);if(!e)throw new Error("useTranslation must be used within a LanguageProvider");return e}const gr=dr;/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ge=(...e)=>e.filter((r,t,g)=>!!r&&r.trim()!==""&&g.indexOf(r)===t).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var hr={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=a.forwardRef(({color:e="currentColor",size:r=24,strokeWidth:t=2,absoluteStrokeWidth:g,className:l="",children:c,iconNode:f,...p},u)=>a.createElement("svg",{ref:u,...hr,width:r,height:r,stroke:e,strokeWidth:g?Number(t)*24/Number(r):t,className:ge("lucide",l),...p},[...f.map(([h,y])=>a.createElement(h,y)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=(e,r)=>{const t=a.forwardRef(({className:g,...l},c)=>a.createElement(mr,{ref:c,iconNode:r,className:ge(`lucide-${pr(e)}`,g),...l}));return t.displayName=`${e}`,t};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=_("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=_("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sr=_("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ar=_("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=_("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=_("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=_("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function vr(){const e=Ie(),{isImpersonating:r,user:t,originalAdmin:g,stopImpersonating:l}=ir(),{t:c}=gr(),[f,p]=a.useState(!1),[u,h]=a.useState(null);if(!r||!t||!g)return null;const y=async()=>{p(!0),h(null);try{await l(),e("/admin")}catch(E){console.error("Failed to stop impersonating:",E),h(E instanceof Error?E.message:"Failed to stop"),p(!1)}};return n.jsxs("div",{className:"bg-amber-500 text-black py-2 px-4 flex items-center justify-center gap-4 text-sm font-medium sticky top-0 z-50",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Sr,{size:16}),n.jsxs("span",{children:[c.impersonationViewingAs,": ",n.jsx("strong",{children:t.username})," (",t.email,")"]})]}),u&&n.jsx("span",{className:"text-red-800 bg-red-200 px-2 py-0.5 rounded text-xs",children:u}),n.jsxs("button",{onClick:y,disabled:f,className:"flex items-center gap-1 bg-black/20 hover:bg-black/30 disabled:opacity-50 px-3 py-1 rounded-full transition-colors",children:[f?n.jsx(wr,{size:14,className:"animate-spin"}):n.jsx(pe,{size:14}),n.jsx("span",{children:f?c.impersonationStopping:c.impersonationStopViewing})]})]})}const Tr=a.lazy(()=>R(()=>import("./LandingPage-Bg_fpYu6.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),br=a.lazy(()=>R(()=>import("./StoryWizard-CA191bdP.js"),__vite__mapDeps([10,1,2,3,11,12,13,14,6,4,5,15,16,17,9]))),Pr=a.lazy(()=>R(()=>import("./MyStories-BYzT3nIl.js"),__vite__mapDeps([18,1,3,2,19,17,15,16,9]))),Cr=a.lazy(()=>R(()=>import("./MyOrders-tlE7GxuG.js"),__vite__mapDeps([20,1,3,2,12,9]))),Rr=a.lazy(()=>R(()=>import("./AdminDashboard-DF3Gu9Ip.js"),__vite__mapDeps([21,1,2,13,17,8,16,6,7,15,12,9]))),Ir=a.lazy(()=>R(()=>import("./Pricing-BOE6YDsC.js").then(e=>e.P),__vite__mapDeps([19,1,3,2,17,15]))),kr=a.lazy(()=>R(()=>import("./BookBuilder-C-oxgBbY.js"),__vite__mapDeps([22,1,3,2,19,17,15,14,8,9]))),xr=a.lazy(()=>R(()=>import("./ResetPassword-Bx6AGxpj.js"),__vite__mapDeps([23,1,2,3,11,9]))),_r=a.lazy(()=>R(()=>import("./EmailVerified-C7_Nai3U.js"),__vite__mapDeps([24,1,2,3,4,9]))),Or=a.lazy(()=>R(()=>import("./TermsOfService-DnGhqtpO.js"),__vite__mapDeps([25,1,3,2,17,9]))),Nr=a.lazy(()=>R(()=>import("./PrivacyPolicy-Cs85qix0.js"),__vite__mapDeps([26,1,3,2,17,9]))),Lr=a.lazy(()=>R(()=>import("./Impressum-6mOTJr5E.js"),__vite__mapDeps([27,1,3,2,17,9])));function Dr(){return n.jsxs(n.Fragment,{children:[n.jsx(vr,{}),n.jsx(a.Suspense,{fallback:n.jsx(Me,{fullScreen:!0}),children:n.jsxs(ke,{children:[n.jsx(C,{path:"/",element:n.jsx(Tr,{})}),n.jsx(C,{path:"/create/*",element:n.jsx(br,{})}),n.jsx(C,{path:"/stories",element:n.jsx(Pr,{})}),n.jsx(C,{path:"/orders",element:n.jsx(Cr,{})}),n.jsx(C,{path:"/pricing",element:n.jsx(Ir,{})}),n.jsx(C,{path:"/book-builder",element:n.jsx(kr,{})}),n.jsx(C,{path:"/admin",element:n.jsx(Rr,{})}),n.jsx(C,{path:"/reset-password/:token",element:n.jsx(xr,{})}),n.jsx(C,{path:"/email-verified",element:n.jsx(_r,{})}),n.jsx(C,{path:"/terms",element:n.jsx(Or,{})}),n.jsx(C,{path:"/privacy",element:n.jsx(Nr,{})}),n.jsx(C,{path:"/impressum",element:n.jsx(Lr,{})})]})})]})}const he={storyType:"",artStyle:"",storyDetails:"",characters:[],currentCharacterId:null,relationships:{},relationshipTexts:{},pages:30,languageLevel:"standard",mainCharacters:[],dedication:"",storyOutline:"",generatedStory:"",storyTitle:"",sceneDescriptions:[],sceneImages:[],coverImages:{frontCover:null,initialPage:null,backCover:null},isGenerating:!1,generationProgress:null,currentStoryId:null,currentStep:0};function Gr(e,r){switch(r.type){case"SET_STORY_TYPE":return{...e,storyType:r.payload};case"SET_ART_STYLE":return{...e,artStyle:r.payload};case"SET_STORY_DETAILS":return{...e,storyDetails:r.payload};case"ADD_CHARACTER":return{...e,characters:[...e.characters,r.payload]};case"UPDATE_CHARACTER":return{...e,characters:e.characters.map(t=>t.id===r.payload.id?r.payload:t)};case"DELETE_CHARACTER":{const t=r.payload,g={},l={};return Object.entries(e.relationships).forEach(([c,f])=>{const[p,u]=c.split("-").map(Number);p!==t&&u!==t&&(g[c]=f)}),Object.entries(e.relationshipTexts).forEach(([c,f])=>{const[p,u]=c.split("-").map(Number);p!==t&&u!==t&&(l[c]=f)}),{...e,characters:e.characters.filter(c=>c.id!==t),mainCharacters:e.mainCharacters.filter(c=>c!==t),relationships:g,relationshipTexts:l}}case"SET_CURRENT_CHARACTER":return{...e,currentCharacterId:r.payload};case"SET_CHARACTERS":return{...e,characters:r.payload};case"SET_RELATIONSHIP":return{...e,relationships:{...e.relationships,[r.payload.key]:r.payload.value}};case"SET_RELATIONSHIP_TEXT":return{...e,relationshipTexts:{...e.relationshipTexts,[r.payload.key]:r.payload.value}};case"SET_RELATIONSHIPS":return{...e,relationships:r.payload};case"SET_PAGES":return{...e,pages:r.payload};case"SET_LANGUAGE_LEVEL":return{...e,languageLevel:r.payload};case"SET_MAIN_CHARACTERS":return{...e,mainCharacters:r.payload};case"SET_DEDICATION":return{...e,dedication:r.payload};case"SET_OUTLINE":return{...e,storyOutline:r.payload};case"SET_GENERATED_STORY":return{...e,generatedStory:r.payload.story,storyTitle:r.payload.title};case"SET_SCENE_DESCRIPTIONS":return{...e,sceneDescriptions:r.payload};case"SET_SCENE_IMAGE":return{...e,sceneImages:[...e.sceneImages.filter(t=>t.pageNumber!==r.payload.pageNumber),r.payload].sort((t,g)=>t.pageNumber-g.pageNumber)};case"SET_COVER_IMAGES":return{...e,coverImages:{...e.coverImages,...r.payload}};case"SET_GENERATING":return{...e,isGenerating:r.payload};case"SET_GENERATION_PROGRESS":return{...e,generationProgress:r.payload};case"SET_CURRENT_STORY_ID":return{...e,currentStoryId:r.payload};case"SET_STEP":return{...e,currentStep:r.payload};case"LOAD_STORY":return{...e,...r.payload};case"RESET_STORY":return{...he};default:return e}}const jr=a.createContext(null);function zr({children:e}){const[r,t]=a.useReducer(Gr,he);return n.jsx(jr.Provider,{value:{state:r,dispatch:t},children:e})}const Ur={success:{bg:"bg-green-600",border:"border-green-700",icon:yr},error:{bg:"bg-red-600",border:"border-red-700",icon:fr},info:{bg:"bg-blue-600",border:"border-blue-700",icon:Ar},warning:{bg:"bg-yellow-500",border:"border-yellow-600",icon:Er}};function $r({id:e,message:r,title:t,variant:g="info",duration:l=8e3,onClose:c,details:f}){const[p,u]=a.useState(!1),[h,y]=a.useState(!1),E=Ur[g],v=E.icon;a.useEffect(()=>{if(requestAnimationFrame(()=>u(!0)),l>0){const k=setTimeout(()=>{P()},l);return()=>clearTimeout(k)}},[l]);const P=()=>{y(!0),setTimeout(()=>c(e),300)};return n.jsxs("div",{className:`
        transform transition-all duration-300 ease-out
        ${p&&!h?"translate-x-0 opacity-100":"translate-x-full opacity-0"}
        ${E.bg} ${E.border}
        text-white rounded-lg shadow-2xl border
        max-w-md w-full pointer-events-auto
        overflow-hidden
      `,children:[n.jsx("div",{className:"p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(v,{className:"shrink-0 mt-0.5",size:24}),n.jsxs("div",{className:"flex-1 min-w-0",children:[t&&n.jsx("p",{className:"font-bold text-lg mb-1",children:t}),n.jsx("p",{className:"text-sm opacity-95",children:r}),f&&f.length>0&&n.jsx("div",{className:"mt-3 pt-3 border-t border-white/20 space-y-1",children:f.map((k,$)=>n.jsx("p",{className:"text-xs opacity-80",children:k},$))})]}),n.jsx("button",{onClick:P,className:"shrink-0 p-1 rounded hover:bg-white/20 transition-colors","aria-label":"Dismiss",children:n.jsx(pe,{size:18})})]})}),l>0&&n.jsx("div",{className:"h-1 bg-white/20",children:n.jsx("div",{className:"h-full bg-white/40 transition-all ease-linear",style:{width:"100%",animation:`shrink ${l}ms linear forwards`}})}),n.jsx("style",{children:`
        @keyframes shrink {
          from { width: 100%; }
          to { width: 0%; }
        }
      `})]})}const me=a.createContext(void 0);function Br({children:e}){const[r,t]=a.useState([]),g=a.useCallback(u=>{t(h=>h.filter(y=>y.id!==u))},[]),l=a.useCallback(u=>{const h=`toast-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;t(y=>[...y,{...u,id:h}])},[]),c=a.useCallback((u,h,y)=>{l({message:u,title:h,variant:"success",duration:1e4,details:y})},[l]),f=a.useCallback((u,h)=>{l({message:u,title:h,variant:"error",duration:8e3})},[l]),p=a.useCallback((u,h)=>{l({message:u,title:h,variant:"info",duration:6e3})},[l]);return n.jsxs(me.Provider,{value:{showToast:l,showSuccess:c,showError:f,showInfo:p,removeToast:g},children:[e,n.jsx("div",{className:"fixed top-4 right-4 z-[100] flex flex-col gap-3 pointer-events-none",children:r.map(u=>n.jsx($r,{id:u.id,message:u.message,title:u.title,variant:u.variant,duration:u.duration,details:u.details,onClose:g},u.id))})]})}function Mr(){const e=a.useContext(me);if(!e)throw new Error("useToast must be used within a ToastProvider");return e}const fe=e=>{const r="reason"in e?e.reason:e.error,t=(r==null?void 0:r.message)||(r==null?void 0:r.toString())||"";if(t.includes("Failed to fetch dynamically imported module")||t.includes("Loading chunk")||t.includes("Loading CSS chunk")){const g="chunk_error_reload",l=sessionStorage.getItem(g),c=Date.now();(!l||c-parseInt(l)>1e4)&&(sessionStorage.setItem(g,c.toString()),console.warn("ðŸ”„ Detected stale chunks after deployment, reloading..."),window.location.reload())}};window.addEventListener("error",fe);window.addEventListener("unhandledrejection",fe);Be.createRoot(document.getElementById("root")).render(n.jsx(a.StrictMode,{children:n.jsx(xe,{children:n.jsx(ur,{children:n.jsx(sr,{children:n.jsx(zr,{children:n.jsx(Br,{children:n.jsx(Dr,{})})})})})})}));export{yr as C,Sr as E,Ar as I,wr as L,Er as T,pe as X,ir as a,He as b,_ as c,Mr as d,Me as e,fr as f,n as j,gr as u};
