# MagicalStory Local Development Environment
# Copy this file to .env and fill in your values

# ========================================
# Server Configuration
# ========================================
PORT=3000
NODE_ENV=development
LOG_LEVEL=debug  # Options: error, warn, info, debug, trace

# ========================================
# JWT Secret (generate a random string)
# ========================================
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production

# ========================================
# Database Configuration (PostgreSQL on Railway)
# ========================================
# Get the public URL from: Railway Dashboard > PostgreSQL > Connect > Public URL
# Format: postgresql://user:password@host:port/database
DATABASE_URL=postgresql://postgres:password@roundhouse.proxy.rlwy.net:12345/railway

# Storage mode
STORAGE_MODE=database

# ========================================
# AI API Keys (REQUIRED for story generation)
# ========================================

# Anthropic Claude API (for story text generation)
# Get from: https://console.anthropic.com/
ANTHROPIC_API_KEY=sk-ant-api03-...

# Google Gemini API (for image generation and evaluation)
# Get from: https://aistudio.google.com/apikey
GEMINI_API_KEY=AIzaSy...

# Runware API (for cheap image inpainting and FLUX models)
# Get from: https://runware.ai/
RUNWARE_API_KEY=your-runware-api-key
INPAINT_BACKEND=runware  # 'runware' (cheap) or 'gemini' (better quality)

# Replicate API (for PuLID face-consistent generation - experimental)
# Get from: https://replicate.com/account/api-tokens
REPLICATE_API_TOKEN=r8_...

# ========================================
# Firebase (for Google Sign-In)
# ========================================
# Get service account JSON from: Firebase Console > Project Settings > Service Accounts
# Copy the entire JSON (single line, properly escaped)
FIREBASE_SERVICE_ACCOUNT={"type":"service_account","project_id":"your-project","private_key":"...","client_email":"..."}

# ========================================
# Stripe Configuration (for payments)
# ========================================
# Get from: https://dashboard.stripe.com/test/apikeys
STRIPE_TEST_SECRET_KEY=sk_test_...
STRIPE_LIVE_SECRET_KEY=sk_live_...

# Webhook signing secret (from Stripe webhook endpoint)
STRIPE_WEBHOOK_SECRET=whsec_...

# ========================================
# Gelato Print API (optional, for physical book printing)
# ========================================
# Get from: https://dashboard.gelato.com/
GELATO_API_KEY=your-gelato-api-key
GELATO_ORDER_TYPE=draft  # 'draft' (preview only) or 'order' (actual printing)
GELATO_PHOTOBOOK_UID=photobooks-softcover_pf_140x140-mm_pt_170-gsm-65lb-coated-silk_cl_4-4_bt_glued-left_prt_1-0

# ========================================
# Story Generation Settings
# ========================================
# Batch size for story generation (0 = generate all at once, 5-10 for lower API tiers)
STORY_BATCH_SIZE=0

# ========================================
# Test Credentials (for Playwright e2e tests)
# ========================================
TEST_EMAIL=test@example.com
TEST_PASSWORD=testpassword
