# Clothing Avatar Generation Prompts

## Overview
This file contains prompts for generating character avatars in different clothing styles.
These avatars are used as reference images during story illustration generation.

## Base Prompt Template

```
Subject: Generate a fashion photograph of the person in the input image.

CRITICAL PRIORITIES (in order):
1. FACE IDENTITY: The face MUST be an exact match to the input image - same facial features,
   skin tone, eye color, hair color and style. This is non-negotiable.
2. CLOTHING STYLE TRANSFER: Copy the EXACT pattern AND colors from the clothing in the input image.
   Apply these to the new outfit.

COMPOSITION:
- Framing: Wide shot. The entire outfit must be visible from head to toe.
- Background: Pure solid white background (#FFFFFF).

WARDROBE DETAILS:
- Style Transfer Rule: Copy the EXACT pattern AND colors from the clothing in the input image.
  Apply these to the new outfit.
- Pants Rule: If trousers/pants are visible in the input image, replicate them. If NOT visible,
  create plain/neutral pants - do NOT match the shirt pattern.
- Outfit: {CLOTHING_STYLE}

PHOTOGRAPHY STYLE:
- Style: High-End Editorial Photography.
- Lighting: Soft, evenly diffused studio lighting.
- Details: Sharp focus on fabric textures.
- Presentation: Clean, professional, magazine-quality look.

Output Quality: 4k, Photorealistic.
```

---

## Clothing Styles by Category (Gender-Aware)

### WINTER
Heavy winter coat or parka with the SAME pattern AND colors as the input image clothing. Layers visible underneath. Warm pants or leggings. Heavy winter boots. Scarf and gloves optional.

### STANDARD
**Female:** Long-sleeved T-shirt, casual hoodie, or cozy sweater with the SAME pattern AND colors as the input image clothing. Jeans or leggings. Sneakers.

**Male:** Long-sleeved T-shirt, casual hoodie, or cozy sweater with the SAME pattern AND colors as the input image clothing. Jeans or casual trousers. Sneakers.

### SUMMER
**Female:** T-shirt, casual sundress, or tank top with the SAME pattern AND colors as the input image clothing. Shorts or skirt. Sandals or flip-flops.

**Male:** T-shirt or tank top with the SAME pattern AND colors as the input image clothing. Shorts. Sandals or flip-flops.

### FORMAL
**Female:** Elegant dress, formal gown, or blouse with skirt with the SAME pattern AND colors as the input image clothing (adapted elegantly). Formal heels or dress shoes.

**Male:** Formal suit or dress shirt with trousers with the SAME pattern AND colors as the input image clothing (adapted elegantly). Formal dress shoes.

---

## Priority System

1. **FACE IDENTITY (Priority #1)**: Non-negotiable - the face must match exactly
2. **CLOTHING STYLE TRANSFER (Priority #2)**: Copy EXACT pattern AND colors from input image clothing

---

## Style Transfer Examples

| Reference Clothing | Winter Output | Summer Output | Formal Output |
|-------------------|---------------|---------------|---------------|
| Blue striped hoodie | Blue striped winter parka | Blue striped t-shirt | Blue suit with subtle stripes |
| Red polka dot dress | Red polka dot coat | Red polka dot sundress | Red formal gown with polka dots |
| Green plaid shirt | Green plaid winter jacket | Green plaid short-sleeve | Green plaid formal vest/shirt |

---

## Safety Settings

When generating fashion photography, use relaxed safety settings to avoid false positives:
- HARM_CATEGORY_HARASSMENT: BLOCK_ONLY_HIGH
- HARM_CATEGORY_HATE_SPEECH: BLOCK_ONLY_HIGH
- HARM_CATEGORY_SEXUALLY_EXPLICIT: BLOCK_ONLY_HIGH
- HARM_CATEGORY_DANGEROUS_CONTENT: BLOCK_ONLY_HIGH

---

## Technical Notes

- Aspect ratio: 9:16 (portrait) for full-body shots
- Background: Pure white (#FFFFFF) for easy compositing
- Model: gemini-2.5-flash-image
- Gender is passed from character data to select appropriate clothing options

---

## Known Limitations

### Avatars Are Not Auto-Regenerated

**Current Behavior:**
- Avatars are generated ONCE when a character is first saved with a photo
- If the user uploads a NEW photo for an existing character, the avatars are NOT automatically regenerated
- The old avatars (generated from the previous photo) will still be used

**Workaround (Developer Mode Only):**
- In developer mode, a "Regenerate" button is available in the Clothing Avatars section
- Click this button to manually regenerate avatars after uploading a new photo

**Future Enhancement:**
- Consider detecting when a character's photo has changed and automatically regenerating avatars
- Could compare photo URLs or add a photo hash to detect changes
